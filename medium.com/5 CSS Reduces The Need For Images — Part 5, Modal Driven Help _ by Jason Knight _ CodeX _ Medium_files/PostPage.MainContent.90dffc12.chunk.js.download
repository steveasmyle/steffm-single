(self.webpackChunklite=self.webpackChunklite||[]).push([[5531],{93394:(e,n,t)=>{"use strict";t.d(n,{Z:()=>r});var i=t(67294);function a(){return(a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}).apply(this,arguments)}var o=i.createElement("path",{d:"M5 12.5c0 .55.2 1.02.59 1.41.39.4.86.59 1.41.59.55 0 1.02-.2 1.41-.59.4-.39.59-.86.59-1.41 0-.55-.2-1.02-.59-1.41A1.93 1.93 0 0 0 7 10.5c-.55 0-1.02.2-1.41.59-.4.39-.59.86-.59 1.41zm5.62 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.42.59.55 0 1.02-.2 1.41-.59.4-.39.59-.86.59-1.41 0-.55-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.03.2-1.42.59-.39.39-.58.86-.58 1.41zm5.6 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.43.59.56 0 1.03-.2 1.42-.59.39-.39.58-.86.58-1.41 0-.55-.2-1.02-.58-1.41a1.93 1.93 0 0 0-1.42-.59c-.56 0-1.04.2-1.43.59-.39.39-.58.86-.58 1.41z",fillRule:"evenodd"});const r=function(e){return i.createElement("svg",a({className:"overflow-dots-filled-25px_svg__svgIcon-use",width:25,height:25},e),o)}},41116:(e,n,t)=>{"use strict";t.d(n,{j:()=>r});var i=t(67294),a=t(47230),o=t(77355),r=function(e){var n=e.children,t=e.href,r=e.width,l=void 0===r?{xs:"100%",sm:"100%",md:"min-width",lg:"min-width",xl:"min-width"}:r;return i.createElement(a.z,{href:t,buttonStyle:"SUBTLE",width:l},i.createElement(o.x,{textAlign:"center"},n))}},19304:(e,n,t)=>{"use strict";t.r(n),t.d(n,{MainContent:()=>mo,useLoader:()=>co});var i=t(59713),a=t.n(i),o=t(64718),r=t(67294),l=t(5977),d=t(83447),s=t(90732),c=t(94986),m=t(28655),u=t.n(m),p=t(8575),k=t(92471),v=t(90833),g=t(77280),f=t(43487),S=t(78870);function h(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function N(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?h(Object(t),!0).forEach((function(n){a()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):h(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function y(){var e=u()(["\n  fragment PostCanonicalizer_post on Post {\n    mediumUrl\n  }\n"]);return y=function(){return e},e}(0,k.Ps)(y());var E=["blog.coinbase.com","moody-pub.medium.fail"],x=function(e){var n=e.post.mediumUrl,t=e.matchedPath,i=e.children,a=(0,f.v9)((function(e){return e.navigation.currentHash})),o=(0,g.Wd)("postPublishedType"),l=(0,g.Wd)("responsesOpen"),s=(0,g.PM)(),c=(0,g.G1)(),m=(0,f.v9)((function(e){return e.navigation.host})),u=(0,S.mb)();if(!n||u)return i;var k=p.parse(decodeURIComponent(n)),h=N(N(N(N({},s?{source:s}:{}),c?{sk:c}:{}),o?{postPublishedType:o}:{}),l?{responsesOpen:l}:{});return m!==k.host?E.indexOf(m)>-1?r.createElement(d.$,null):r.createElement(v.l,{to:(0,S.Rk)(n,h,a),replace:!0,isMediumApp:!0}):k.path&&t!==k.path?r.createElement(v.l,{to:(0,S.Rk)(k.path,h,a),replace:!0}):i},b=t(51098),F=t(319),w=t.n(F),P=t(94078),I={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PostViewerEdgeContentQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postMeteringOptions"}},type:{kind:"NamedType",name:{kind:"Name",value:"PostMeteringOptions"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"post"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"fullContent"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postMeteringOptions"},value:{kind:"Variable",name:{kind:"Name",value:"postMeteringOptions"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isLockedPreviewOnly"}},{kind:"Field",name:{kind:"Name",value:"validatedShareKey"}},{kind:"Field",name:{kind:"Name",value:"bodyModel"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PostBody_bodyModel"}}]}}]}}]}}]}}]}}]}}].concat(w()(P.Pk.definitions))},_=function(){var e,n,t,i,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],l=(0,f.v9)((function(e){return e.navigation.referrer})),d=null!==(e=(0,g.G1)())&&void 0!==e?e:void 0,s=null!==(n=(0,g.PM)())&&void 0!==n?n:void 0,c={referrer:l,sk:d,source:s},m=!r,u=(0,b.a)(),p=u.loading,k=u.shouldShowIncognitoRegwall;!p&&k&&(m=!0);var v=(0,o.a)(I,{variables:{postId:a,postMeteringOptions:c},ssr:!1,skip:!a||m}),S=v.loading,h=v.error,N=v.data,y=null==N||null===(t=N.post)||void 0===t||null===(i=t.viewerEdge)||void 0===i?void 0:i.fullContent;return S||p?{loading:S}:h?{error:h}:{content:y}},O=t(96370),C=t(66411),T=t(2808),R=t(50458),D=t(6280),A=t(77355),M=t(29746),B=function(e){var n=e.isDockingEnabled,t=void 0!==n&&n,i=e.undockedBackgroundColor,a=e.maxWidthSize,o=void 0===a?"inset":a,l=e.children,d=e.marginBottom,s=void 0===d?{xs:"10px",sm:"10px",md:"26px",lg:"26px",xl:"26px"}:d,c=(0,D.$)(t),m=c.dockRef,u=c.markerRef,p=c.isStuck;return r.createElement(r.Fragment,null,r.createElement(A.x,{ref:u}),r.createElement(A.x,{tag:"footer",ref:m,display:"flex",alignItems:"center",boxSizing:"content-box",height:(0,M.a)(52),maxHeight:(0,M.a)(52),zIndex:"1",position:t?{xs:"static",sm:"static",md:"sticky",lg:"sticky",xl:"sticky"}:"static",bottom:t?{xs:void 0,sm:void 0,md:"0",lg:"0",xl:"0"}:void 0,backgroundColor:p?"BACKGROUND":i,borderTop:p?{xs:"NONE",sm:"NONE",md:"BASE_LIGHTER",lg:"BASE_LIGHTER",xl:"BASE_LIGHTER"}:"NONE",marginBottom:s},r.createElement(A.x,{flexGrow:"1"},r.createElement(O.P,{size:o},l))))},L=t(32931),j=t(70929),V=t(56804),U=t(75761),W=t(21232),G=t(30020),H=t(21755),z=t(75221),Y=t(17583),Z=t(10654),$=t(51277),q=t(84130),Q={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"FloatingPostActions_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"allowResponses"}},{kind:"Field",name:{kind:"Name",value:"postResponses"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"count"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"MultiVote_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"OverflowMenuButtonWithNegativeSignal_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"AddToCatalogBookmarkButton_post"}}]}}].concat(w()(Z.x.definitions),w()($.v.definitions),w()(q.G.definitions))},X={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"FloatingPostActionsQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"post"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"FloatingPostActions_post"}}]}}]}}].concat(w()(Q.definitions))},K=t(91743),J=function(e){var n,t,i=e.post,a=e.isSingleColumn,l=r.useContext(W.f).openSidebar,d=(0,Y.s)(),s=!d||d===H.j.xl,c=(0,o.a)(X,{variables:{postId:i.id},ssr:!1}),m=c.data,u=c.loading,p=c.error;return u?null:(t=p||null==m||!m.post?i:m.post,r.createElement(L.j,{multiVoteButton:r.createElement(V.S,{post:t,buttonStyle:"SUBTLE_MARGIN",hasDialog:!0,shouldHideClapsText:!0,shouldShowResponsiveLabelText:!0,susiEntry:"clap_footer",buttonColor:"LIGHTER",countScale:"S"}),responsesButton:r.createElement(U.h,{svgSize:"S",responsesCountScale:"S",trackingData:{postId:t.id},responsesCount:(null===(n=t.postResponses)||void 0===n?void 0:n.count)||null,isLimitedState:t.isLimitedState,handleClick:l,countStylesOverride:{marginLeft:"4px"},allowResponses:t.allowResponses,disabledTooltipText:"Responses hidden"}),saveButton:a?r.createElement(j.o,{kind:z.ej.POST,target:t}):r.createElement(G._,{tooltipText:"More",targetDistance:10},r.createElement(K.t,{post:t,hideAddToList:!1,popoverPositioningStrategy:s?"fixed":"absolute",hideOnScroll:!s})),allowResponses:!!t.allowResponses,isSingleColumn:a}))},ee=t(52439),ne=t(8851),te=t(24258),ie=t(62367),ae=t(31889),oe=t(78142),re=/rgba\(([\d]+),\s*([\d]+),\s*([\d]+),\s*([\d]+|[\d]*.[\d]+)\)/,le=function(e){var n,t,i=e.children,a=e.margin,o=(0,ae.F)();return r.createElement(r.Fragment,null,r.createElement(A.x,{marginTop:"-240px",background:"linear-gradient(".concat((n=o.backgroundColor,t=n.match(re),t?"rgba(".concat(t[1],", ").concat(t[2],", ").concat(t[3],", 0)"):(0,oe.l9)(0)),", ").concat(o.backgroundColor,")"),height:"250px",position:"relative",width:"100%"}),r.createElement(A.x,{backgroundColor:"BACKGROUND"},r.createElement(A.x,{margin:"auto",maxWidth:"760px",sm:{margin:null!=a?a:"0 24px 0"}},i)))},de=t(6443),se=t(43822),ce=t(18627),me=t(39944),ue=function(e){var n=e.postId,t=e.align,i=e.entityId,a=e.id,o=e.buttonStyle,l=void 0===o?"STRONG":o,d=e.onClick,s=(0,de.H)().value,c=(0,ce.Av)(),m=(0,f.v9)((function(e){return e.config.authDomain})),u=null==s?void 0:s.hasPastMemberships,p=(0,S.Rk)((0,R.c5)(m),{subscribeToUserId:i||"",susiEntry:"post_paywall"}),k=r.useCallback((function(){c.event("paywall.upgradeClicked",{postId:n,userId:null==s?void 0:s.id}),null==d||d()}),[n,null==s?void 0:s.id]),v=u?"182px":"104px",g=u?"Resume membership":"Upgrade";return r.createElement(me.M,{source:"upgrade_membership",dimension:"post_limit",sourceProviderData:{postId:n},eventData:{postId:n}},r.createElement(A.x,{display:"flex",textAlign:"center",justifyContent:"left"===t?"flex-start":"center"},r.createElement(se.a,{isButton:!0,onClick:k,buttonStyle:l,width:v,redirectUrl:p,id:a},g)))},pe=t(14818),ke=t(54945),ve=t(87691),ge=t(14646);function fe(){return(fe=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}).apply(this,arguments)}var Se=r.createElement("path",{d:"M1 6.25l4 4.5 9-9.5",stroke:"currentColor",strokeWidth:1.5});const he=function(e){return r.createElement("svg",fe({width:15,height:12,viewBox:"0 0 15 12",fill:"none"},e),Se)};var Ne=function(e){return{flexShrink:0,marginRight:"12px",marginTop:"4px","& path":{stroke:e.baseColor.fill.normal}}},ye=function(e){var n=e.headerText,t=e.reasonsToUpgrade,i=e.paywall,a=e.postId,o=(0,ge.I)(),l=(0,Y.s)(),d="xs"===l||"sm"===l,s=(0,r.useMemo)((function(){var e=(null==i?void 0:i.creatorSpotlights)||[];return d&&e.length>6?e.filter((function(e){return!e.hideOnSmallScreen})):e}),[d,i]),c=(0,ie.k)(),m=(0,r.useCallback)((function(){null==c||c.flushLocalAttributes()}),[c]);return r.createElement(le,{margin:"0 -24px"},r.createElement(A.x,{display:"flex",justifyContent:"center",textAlign:"center",sm:{flexDirection:"column"}},r.createElement(A.x,{display:"flex",flexDirection:"column",padding:"32px",marginTop:"32px",backgroundColor:"BASE_LIGHT",sm:{padding:"28px 33px 32px"},textAlign:"left",borderRadius:"4px",maxWidth:"100%"},r.createElement(ke.H2,{scale:{xs:"S",sm:"S",md:"M",lg:"M",xl:"M"}},n),r.createElement(A.x,{margin:"16px 0 32px"},t.map((function(e,n){return r.createElement(A.x,{display:"flex",alignItems:"flex-start",key:"reason-".concat(n),padding:"3px 0"},r.createElement(he,{className:o(Ne)}),r.createElement(ve.F,{scale:"M",key:e,color:"DARKER"},e))}))),r.createElement(A.x,{display:"flex",justifyContent:"space-between",flexWrap:"wrap"},s.map((function(e){return r.createElement(A.x,{key:e.name,display:"flex",alignItems:"center",flexDirection:"column",flexGrow:"1",flexShrink:"1",flexBasis:d?"33%":"25%",marginBottom:"32px","data-testid":"creator-spotlight"},r.createElement(pe.z,{alt:e.name,miroId:e.miroId,diameter:64}),r.createElement(A.x,{marginTop:"8px",textAlign:"center"},r.createElement(ve.F,{scale:d?"S":"M",color:"DARKER"},e.name),r.createElement(ve.F,{scale:"XS"},e.title),e.company&&r.createElement(ve.F,{scale:"XS"},e.company)))}))),r.createElement(ue,{id:"paywallButton-programming",postId:a,align:"center",buttonStyle:"STRONG",onClick:m}))))},Ee=t(27517),xe=t(25735),be=t(25550),Fe=t(63038),we=t.n(Fe),Pe=t(32493),Ie=t(36405),_e=t(93717),Oe=t(18839),Ce=t(25747);function Te(){var e=u()(["\n  mutation SendAcctAuthEmailByUserId(\n    $userId: String!\n    $redirect: String\n    $fullName: String\n    $captchaValue: String\n  ) {\n    sendAcctAuthEmailByUserId(\n      userId: $userId\n      redirect: $redirect\n      fullName: $fullName\n      captchaValue: $captchaValue\n    ) {\n      ... on SusiMethod {\n        value\n      }\n      ... on BadRequest {\n        message\n      }\n      ... on FailedChallenge {\n        message\n      }\n      ... on NotFound {\n        message\n      }\n    }\n  }\n"]);return Te=function(){return e},e}var Re=(0,k.Ps)(Te()),De=function(e){var n=e.actionUrl,t=e.children,i=e.onSuccess,a=e.token,o=e.userId,l=(0,ce.Av)(),d=!!(0,Ie.P5)("skip_sign_in_recaptcha"),s=r.useState(!1),c=we()(s,2),m=c[0],u=c[1],p=(0,f.v9)((function(e){return e.navigation.currentLocation})),k=function(){u(!1)},v=(0,C.pK)(),g=(0,C.hp)(),S=n&&a?(0,Oe.hQ)(p,v,g,n,a):(0,Oe.hQ)(p,v,g),h=(0,be.r)(),N=h.loading,y=h.error,E=h.viewerId;return N||y?null:r.createElement(Pe.m,{mutation:Re,onCompleted:function(e){switch(e.sendAcctAuthEmailByUserId.__typename){case"SusiMethod":l.event("site.loginLinkSent",{}),i&&i();break;case"FailedChallenge":l.event("site.loginByEmailCaptchaFailure",{}),u(!1);break;case"BadRequest":case"NotFound":default:k()}},onError:k},(function(e){var n=function(n){(0,Ce.Zs)(!0,E,o,"Email",!1);var t="medium";l.event("susi.methodClicked",{entryPoint:g,operation:"login",susiMethod:t.toLowerCase(),alternateUserSuggestionShown:!0,alternateUserSuggestionAccountType:t.toLowerCase(),alternateUserSuggestionTargetUserId:o,alternateUserSuggestionSourceUserId:E}),e({variables:{userId:o,redirect:S,captchaValue:n}})};return r.createElement(r.Fragment,null,!d&&r.createElement(_e.k,{callback:n,shouldExecuteRecaptcha:m}),t({handleSubmit:function(){return d?n(null):u(!0)}}))}))},Ae=t(69862),Me=t(43705),Be=t(2959),Le=t(40980),je=function(e){var n=e.actionUrl,t=e.token,i=e.userSocialLogins,a={actionUrl:n||"",operation:"login",token:t||"",targetUserId:i.userId,alternateUserSuggestion:!0};return r.createElement(Le.$,{eventData:{operation:a.operation}},i.google?r.createElement(Me.x,a):i.facebook?r.createElement(Ae.q,a):i.twitter?r.createElement(Be.G,a):r.createElement(r.Fragment,null))},Ve=t(93310),Ue=t(78285);function We(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}var Ge=function(e){var n=e.declineSuggestedAccount,t=e.isSocial,i=(0,f.v9)((function(e){return e.navigation.hasRenderedAlternateUserBanner})),o=(0,C.hp)(),l=(0,Ee.I0)(),d=(0,de.H)(),s=d.loading,c=d.error,m=d.value;if(s||c)return r.createElement(r.Fragment,null);var u=function(e){return e?r.createElement(Ve.r,{onClick:function(){return p("SIGNIN_OPTIONS")},linkStyle:"OBVIOUS"},"See all login options"):r.createElement(r.Fragment,null,"Not you?"," ",r.createElement(Ve.r,{onClick:function(){return p("SIGNIN_OPTIONS")},linkStyle:"OBVIOUS"},"Sign in")," or ",r.createElement(Ve.r,{onClick:function(){return p("SIGNUP_OPTIONS")},linkStyle:"OBVIOUS"},"create an account"))},p=function(e){var t="SIGNIN_OPTIONS"===e?"login":"register";n(),l((0,Ue.Pc)(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?We(Object(t),!0).forEach((function(n){a()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):We(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({operation:t,step:e},!!o&&{susiEntry:o})))};return i?u(m):m?r.createElement(Ve.r,{onClick:function(){return n()}},"Not me"):u(t)},He=t(75412),ze=t(97171);function Ye(){var e=u()(["\n  query UserSocialLoginsQuery($userId: String!) {\n    userSocialLogins(userId: $userId) {\n      userId\n      twitter\n      facebook\n      google\n      redactedEmailAddress\n      isMember\n      emailAddress\n      userAvatar {\n        __typename\n        username\n        name\n        imageId\n        mediumMemberAt\n      }\n    }\n  }\n"]);return Ye=function(){return e},e}function Ze(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function $e(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ze(Object(t),!0).forEach((function(n){a()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ze(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var qe=function(e){var n=e.children,t=e.postRenderCallback,i=(0,ce.Av)(),a=(0,C.hp)(),o=(0,g.PM)(),l=(0,C.P7)(o||""),d=l.userId,s=l.name,c=r.useState({shouldRun:!1,showSuggestedAccount:!1,userSocialLogins:{facebook:!1,google:!1,twitter:!1,redactedEmailAddress:"",emailAddress:"",userAvatar:{__typename:"UserAvatar",username:"",name:"",imageId:"",mediumMemberAt:0},userId:"",isMember:!1}}),m=we()(c,2),u=m[0],p=m[1];r.useEffect((function(){var e=u.shouldRun,n=u.showSuggestedAccount,i=u.userSocialLogins;e&&(null==t||t(k,n,i))}),[u.shouldRun]);var k=(0,de.H)().value,v=(0,be.r)(),f=v.loading,S=v.error,h=v.viewerId;if(f||S)return null;var N=!("email"!==s||k&&k.mediumMemberAt||!d);return N&&d?r.createElement(He.A,{query:Qe,variables:{userId:d}},(function(e){var o=e.loading,r=e.error,l=e.data,d=(l=void 0===l?{}:l).userSocialLogins,s=!(o||r||!d||k&&!d.isMember||!d.facebook&&!d.google&&!d.twitter&&!d.redactedEmailAddress),c=$e({loading:o,showSuggestedAccount:s},s&&{userSocialLogins:d,declineSuggestedAccount:function(){var e=(0,ze.S)(d);i.event("susi.suggestNotYou",{entryPoint:a,susiMethod:e,alternateUserSuggestionAccountType:e,alternateUserSuggestionTargetUserId:null==d?void 0:d.userId,alternateUserSuggestionSourceUserId:h})}});return!t||o||u.shouldRun||p({shouldRun:!0,showSuggestedAccount:s,userSocialLogins:d}),(null==n?void 0:n(c))||null})):(t&&!u.shouldRun&&p($e($e({},u),{},{shouldRun:!0})),(null==n?void 0:n({showSuggestedAccount:N,loading:!1}))||null)},Qe=(0,k.Ps)(Ye()),Xe=t(47230);function Ke(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function Je(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ke(Object(t),!0).forEach((function(n){a()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ke(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var en=function(e,n,t){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{withHowToPrefix:!0},a=n?(0,ze.J)(n):null;a=a&&a.length<=13?a:null;var o=t?"".concat(a,", read more from ").concat(t," — and everyone else on ").concat(e,"."):"".concat(a,", here's how to read this story — and everything else on ").concat(e,"."),r=i.withHowToPrefix?"How to read":"Read",l=t?"".concat(r," this story from ").concat(t," — and everything else on ").concat(e,"."):"".concat(r," this story — and everything else on ").concat(e,".");return a?o:l},nn=function(e){var n=e.declineSuggestedAccount,t=e.userSocialLogins,i=(0,Ee.I0)();return r.createElement(C.cW,{source:{susiEntry:"post_paywall"},extendSource:!0},r.createElement(A.x,{display:"flex",sm:{flexDirection:"column"}},r.createElement(A.x,{display:"flex",flexDirection:"row",justifyContent:"center"},t.facebook||t.google||t.twitter?r.createElement(je,{userSocialLogins:t}):r.createElement(De,{onSuccess:function(){return i((0,Ue.Pc)({step:"CHECK_YOUR_INBOX",operation:"login",susiEntry:"post_paywall"}))},userId:t.userId},(function(e){var n=e.handleSubmit;return r.createElement(Xe.z,{buttonStyle:"SOCIAL",size:"REGULAR",onClick:n},"Send login link")})))),n&&r.createElement(A.x,{marginTop:"10px",marginRight:"5px",sm:{marginTop:"20px"},display:"flex",justifyContent:"center",flexDirection:"column"},r.createElement(ve.F,{scale:"M"},r.createElement(Ge,{declineSuggestedAccount:n,isSocial:!!t&&!!(t.facebook||t.google||t.twitter)}))))},tn=function(e){var n=e.declineSuggestedAccount,t=e.userSocialLogins,i=e.suggestedAccountEventData,a=e.showSuggestedAccount,o=e.postId,l=Je(Je({},i),{},{postId:o});return r.createElement(me.M,{source:"upgrade_membership",dimension:"post_limit_suggestion",sourceProviderData:{postId:o},eventData:l},r.createElement(A.x,{display:"inline-block",textAlign:"center"},r.createElement(nn,{declineSuggestedAccount:n,showSuggestedAccount:a,userSocialLogins:t}),r.createElement(A.x,{display:"flex",flexDirection:"row",marginTop:"10px",sm:{justifyContent:"center"}},r.createElement(ve.F,{scale:"L"},r.createElement(se.a,{eventData:i,linkStyle:"OBVIOUS"},"Learn more about membership")))))},an=function(e){var n=e.post,t=e.excludePadding,i=void 0!==t&&t,a=(0,f.v9)((function(e){return e.config.productName})),o=(0,de.H)().value,l=(0,be.r)().viewerId,d=n.creator&&n.creator.id,s=(0,xe.VB)({name:"enable_members_only_audio",placeholder:!1}),c=(0,Y.s)(),m="xs"===c||"sm"===c;return r.createElement(le,{margin:"0 -24px"},r.createElement(qe,null,(function(e){var t,c=e.loading,u=e.showSuggestedAccount,p=e.declineSuggestedAccount,k=e.userSocialLogins;return c?r.createElement(r.Fragment,null):(u&&(t={alternateUserSuggestionShown:u,alternateUserSuggestionAccountType:(0,ze.S)(k),alternateUserSuggestionTargetUserId:!!k&&k.userId,alternateUserSuggestionSourceUserId:l}),r.createElement(A.x,{display:"flex",justifyContent:"center",textAlign:"center",sm:{flexDirection:"column"}},r.createElement(A.x,{display:"flex",flexDirection:"column",padding:i?"48px 0 0":"32px",sm:{padding:"28px 16px 32px",textAlign:"center"},backgroundColor:"NONE"},r.createElement(ke.H2,{scale:{xs:"S",sm:"S",md:"M",lg:"M",xl:"M"}},u?"Switch to your member account for unlimited reading.":r.createElement(A.x,{textAlign:"left",sm:{marginBottom:"5px",textAlign:"center"}},en(a,o&&o.name,n.creator&&n.creator.name))),r.createElement(ve.F,{scale:{xs:"M",sm:"M",md:"L",lg:"L",xl:"L"},color:"DARKER",tag:"div"},!u&&r.createElement(r.Fragment,null,r.createElement(A.x,{marginTop:"16px",marginBottom:"32px",textAlign:"left",sm:{display:"inline-block",textAlign:"center"}},s?"You’ve read all your free member-only stories. Become a member for\n                unlimited access to every story on ".concat(a," and to support the\n                voices you want to hear more from. As a member, you can also listen to\n                stories anytime, anywhere."):"You’ve read all your free member-only stories, become a member to get unlimited access. Your membership fee supports the voices you want to hear more from."),r.createElement(ue,{postId:n.id,align:m?"center":"left",entityId:d})),r.createElement(A.x,{marginTop:u?"28px":"8px",marginBottom:"28px",paddingRight:"6px",paddingLeft:"6px",sm:{display:u?"inline-block":"none"}},function(e,n,t){if(n.showSuggestedAccount&&e){var i=e.isMember,a=e.redactedEmailAddress;return r.createElement(r.Fragment,null,"Looks like you're coming from the ",i&&"member ","account"," ",r.createElement("b",null,a)," but you’re signed in as ",r.createElement("b",null,null==t?void 0:t.email),". Switch to your",i?" member account for unlimited access":" account",".")}return null}(k,{showSuggestedAccount:u},o))),!!u&&k&&r.createElement(tn,{declineSuggestedAccount:p,userSocialLogins:k,suggestedAccountEventData:t,showSuggestedAccount:u,postId:n.id}))))})))},on=function(e){var n,t=e.paywall,i=e.post,a=(0,f.v9)((function(e){return e.config.productName})),o=(0,de.H)().value,l=en(a,null==o?void 0:o.name,null===(n=i.creator)||void 0===n?void 0:n.name,{withHowToPrefix:!1});return r.createElement(ye,{headerText:l,reasonsToUpgrade:["Dive deeper into the topics that matter to you","Get in-depth articles answering thousands of questions","Achieve your personal and professional goals"],paywall:t,postId:i.id})},rn=function(e){switch(e){case"javascript":return"JavaScript";case"ios-development":return"iOS development";case"android-development":return"Android development";default:return e.replace("-"," ").toLowerCase()}},ln=function(e){var n,t=e.paywall,i=e.post,a=(0,f.v9)((function(e){return e.config.productName})),o=(0,de.H)().value,l=null===(n=i.primaryTopic)||void 0===n?void 0:n.slug,d=function(e){var n=e?rn(e):"technical";return["Become an expert in your areas of interest","Get in-depth articles answering thousands of ".concat(n," questions"),"Grow your career or build a new one"]}(l),s=function(e,n,t){var i=n?(0,ze.J)(n):null;if(i=i&&i.length<=13?i:null,t){var a=rn(t);return i?"".concat(i,", get unlimited access to ").concat(a," stories from industry leaders on ").concat(e,"."):"Get unlimited access to ".concat(a," stories from industry leaders on ").concat(e,".")}return i?"".concat(i,", get unlimited access to stories from industry leaders on ").concat(e,"."):"Get unlimited access to stories from industry leaders on ".concat(e,".")}(a,null==o?void 0:o.name,l);return r.createElement(ye,{headerText:s,reasonsToUpgrade:d,paywall:t,postId:i.id})},dn=t(6402),sn=t(57900),cn=function(e){var n,t=e.post,i=e.excludePadding,a=void 0!==i&&i,l=(0,de.H)().value,d=(0,ce.Av)();(0,r.useEffect)((function(){d.event("paywall.viewed",{userId:null==l?void 0:l.id})}),[]);var s=r.createElement(an,{post:t,excludePadding:a}),c=(0,o.a)(sn.Q,{ssr:!1,variables:{postId:t.id}}),m=c.data,u=c.error,p=c.loading;(0,r.useEffect)((function(){u&&dn.k.error({error:u},"PayWallWrapper query error")}),[u]);var k=null==m||null===(n=m.post)||void 0===n?void 0:n.viewerEdge.paywall;if(u||p||!k)return null;switch(k.type){case z.zB.PROGRAMMING:return r.createElement(ln,{paywall:k,post:t});case z.zB.ASPIRATIONAL:return r.createElement(on,{paywall:k,post:t});default:return s}},mn=t(39610),un=t(26350),pn=t(28451),kn=t(54935),vn=t(32442),gn=function(e){var n=e.meterCount,t=e.postId,i=e.susiEntry,a="register",o={meterCount:n,operation:a,postId:t},l=(0,kn.j)().openModal;return r.createElement(A.x,{display:"flex",flexDirection:"column",textAlign:"center",margin:"62px 0 52px",sm:{flexDirection:"column",margin:"40px 0"}},r.createElement(Le.$,{eventData:o},r.createElement(Me.x,{operation:a})),r.createElement(A.x,{marginTop:"10px",sm:{marginTop:"12px"}},r.createElement(Le.$,{eventData:o},r.createElement(Ae.q,{operation:a}))),r.createElement(A.x,{marginTop:"10px",sm:{marginTop:"12px"}},r.createElement(Le.$,{eventData:o},r.createElement(vn.R,{goToEmailAuthStep:function(){l({step:"ENTER_EMAIL",susiEntry:i,operation:a})},operation:a}))))},fn="post_regwall",Sn=function(e){var n=e.meteringInfo,t=e.post,i=(0,ce.Av)(),a="LOCKED_POST_SOURCE_SYNDICATED"===t.lockedSource,o=null==n?void 0:n.postIds.length,l=(0,f.v9)((function(e){return e.navigation.susiEmail}));return(0,r.useEffect)((function(){i.event("meter.viewed",{meterCount:o,postId:t.id,uiType:a?pn.j.SyndicatedRegwall:pn.j.RegWall})}),[]),r.createElement(C.cW,{source:{postId:t.id,susiEntry:fn}},r.createElement(le,null,r.createElement(A.x,{display:"flex",textAlign:"center",justifyContent:"center",sm:{textAlign:"center"},flexDirection:"column"},r.createElement(A.x,{padding:"48px 56px",sm:{padding:"28px 16px 48px"}},r.createElement(ke.H2,{scale:{xs:"S",sm:"S",md:"M",lg:"M",xl:"M"}},l?"Check your inbox.":r.createElement(r.Fragment,null,r.createElement(A.x,{display:"none",sm:{display:"block"}},"To keep reading this story, get the free app or log in."),r.createElement(A.x,{display:"block",sm:{display:"none"}},"Read the rest of this story with a free account."))),r.createElement(ve.F,{color:"DARKER",scale:{xs:"M",sm:"M",md:"L",lg:"L",xl:"L"},tag:"div"},l?r.createElement(r.Fragment,null,r.createElement(A.x,{paddingTop:"12px",paddingBottom:"56px"},"Click the link we sent to ",l," to complete your account setup and continue reading this story."),r.createElement(ve.F,{color:"LIGHTER",scale:"M"},"Didn't get the link?"," ",r.createElement(un.R,{linkStyle:"OBVIOUS",operation:"register",post:t,susiEntry:fn},"Try again"))):r.createElement(r.Fragment,null,r.createElement(A.x,{display:"none",sm:{display:"block"}},r.createElement(A.x,{margin:"42px 0"},r.createElement(mn.a,{isButton:!0,postId:t.id,appEntry:"regwall",copy:"Read in app"})),r.createElement(A.x,{marginBottom:"-20px"},"Or, continue in mobile web")),r.createElement(gn,{meterCount:null==n?void 0:n.postIds.length,postId:t.id,susiEntry:fn}),"Already have an account?"," ",r.createElement(un.R,{linkStyle:"OBVIOUS",operation:"login",post:t,susiEntry:fn},"Sign in")))))))},hn=t(49608),Nn=function(e){var n=e.post,t=e.meteringInfo,i=e.excludePadding,a=n.id,o=n.content.isLockedPreviewOnly,l=(0,be.r)(),d=l.viewerId,s=l.loading,c=(0,hn.Q)(null!=d?d:""),m=_(a,o).loading,u=(0,xe.dd)("enable_maim_the_meter").value;if(!m&&o&&(t||u)){if(c)return r.createElement(cn,{post:n,excludePadding:i});if(!s)return r.createElement(Sn,{post:n,meteringInfo:t})}return null},yn=t(21919);function En(){var e=u()(["\n  mutation AddCollaboratorMutation($postId: ID!) {\n    addCollaborator(postId: $postId)\n  }\n"]);return En=function(){return e},e}function xn(){var e=u()(["\n  fragment AddCollaborator_post on Post {\n    isPublished\n    id\n  }\n"]);return xn=function(){return e},e}(0,k.Ps)(xn());var bn=(0,k.Ps)(En()),Fn=t(73776),wn=t(2031),Pn=t(48494),In=t(70405),_n=t(82492),On=t.n(_n),Cn=t(68254),Tn=t.n(Cn),Rn=t(20512),Dn=t(46696),An=t(15085);function Mn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function Bn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Mn(Object(t),!0).forEach((function(n){a()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Mn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Ln=(0,Ee.$j)((function(e){var n=e.config,t=n.productName,i=n.defaultImages,a=n.collectionStructuredData,o=e.navigation;return{currentLocation:o.currentLocation,host:o.host,productName:t,defaultImages:i,collectionStructuredData:a}}))((function(e){var n=e.currentLocation,t=e.host,i=e.post,a=e.postDescription,o=e.productName,l=e.defaultImages,d=e.collectionStructuredData,s=i.collection,c=i.creator,m=i.id,u=i.mediumUrl,p=i.isLocked,k=i.previewImage,v=i.firstPublishedAt,g=i.updatedAt,f=(0,An._t)(i,o),h={id:l.postLogo.imageId,originalWidth:l.postLogo.width,originalHeight:l.postLogo.height},N={id:l.orgLogo.imageId,originalWidth:l.orgLogo.width,originalHeight:l.orgLogo.height},y=s?{"@type":"Organization",name:s.name,url:s.domain||(0,S.l1)(t,(0,R.WG)(s,n)),logo:function(e){if(!e||!e.logo||!e.logo.id)return(0,Rn.lc)(N);var n=(0,Rn.lc)(e.logo);return n&&60===n.height&&n.width<=600?n:(0,Rn.lc)(N)}(s)}:{"@type":"Organization",name:o,url:(0,S.l1)(t,"/"),logo:(0,Rn.lc)(N)};s&&d&&d[s.id]&&On()(y,d[s.id].data);var E=k&&k.id?(0,Rn.Y4)(Bn(Bn({},k),{},{miroId:k.id,croppedWidth:1200})):(0,Rn.NJ)({url:(0,Dn.W6)({miroId:h.id,width:h.originalWidth}),height:h.originalHeight,width:h.originalWidth}),x=a||"",b=p?{isAccessibleForFree:"False",hasPart:{"@type":"WebPageElement",isAccessibleForFree:"False",cssSelector:".meteredContent"}}:{},F=Bn({"@type":"NewsArticle",image:E,url:u,dateCreated:v&&new Date(v).toISOString(),datePublished:v&&new Date(v).toISOString(),dateModified:g&&new Date(g).toISOString(),headline:f,name:f,description:x,identifier:m,author:c&&c.name&&c.username?{"@type":"Person",name:c.name||c.username,url:(0,R.AW)(c,t)}:null,creator:c&&[c.name],publisher:y,mainEntityOfPage:u},b),w=Bn(Bn({},{"@context":"http://schema.org"}),F);return r.createElement(In.ql,null,r.createElement("script",{type:"application/ld+json"},Tn()(w,{isJSON:!0})))})),jn=t(21372),Vn=t(22680);function Un(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function Wn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Un(Object(t),!0).forEach((function(n){a()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Un(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Gn=(0,Ee.$j)((function(e){return{authDomain:e.config.authDomain,host:e.navigation.host,productName:e.config.productName}}))((function(e){var n,t,i,a,o=e.authDomain,l=e.productName,d=e.post,s=d.canonicalUrl,c=d.collection,m=d.creator,u=d.id,p=d.latestPublishedAt,k=d.mediumUrl,v=d.previewContent,g=d.socialTitle,f=d.socialDek,S=d.visibility,h=d.isShortform,N="UNLISTED"===S,y=!d.firstPublishedAt,E=null==m?void 0:m.name,x=(0,An.yB)(d),b=d.title||"",F=x.latestTitle||b;if(h){var w=Wn(Wn({},d),{},{title:F});i=(0,An.oS)(w,l,x.hasTitleGraf).trim(),a=(0,Vn.O)(d,x.hasTitleGraf)}else i=(0,An._t)(d,l,x,!0).trim(),a=(0,Vn.j)(d);var P,I,_,O=f||(null==v?void 0:v.subtitle)||a;if(null!=d&&null!==(n=d.previewImage)&&void 0!==n&&n.id&&!d.isLimitedState){var C=d.previewImage;P=(0,Dn.vz)({miroId:C.id,aspectRatio:1.9,croppedWidth:C.originalWidth?Math.min(C.originalWidth,1200):1200,originalWidth:C.originalWidth,originalHeight:C.originalHeight,focusPercentX:C.focusPercentX,focusPercentY:C.focusPercentY}),d.previewImage.alt&&(I=d.previewImage.alt)}else if(d.isLimitedState){var T={id:"1*3SjgcTt7wCYYS10ff6-0JQ.png",originalWidth:748,originalHeight:390,focusPercentX:50,focusPercentY:40};P=(0,Dn.vz)({miroId:T.id,aspectRatio:1.9,croppedWidth:T.originalWidth?Math.min(T.originalWidth,1200):1200,originalWidth:T.originalWidth,originalHeight:T.originalHeight,focusPercentX:T.focusPercentX,focusPercentY:T.focusPercentY}),I="This image was reported as a potential violation of Medium's rules and is under investigation."}null!=m&&m.username&&(_=(0,R.AW)(m,o));var D=(0,R.CK)(u),A=!(null!==(t=(0,An.c_)(d))&&void 0!==t&&t.shouldIndexPost),M=p&&new Date(p).toISOString(),B=(0,jn.Vd)(d.readingTime||0),L=null==m?void 0:m.twitterScreenName,j=(null==c?void 0:c.twitterUsername)||"Medium",V=null==c?void 0:c.facebookPageId,U=g||b||F;d.isLimitedState&&(U="");var W=d.isLimitedState?"":O,G=(0,r.useMemo)((function(){var e;return r.createElement(In.ql,null,r.createElement("meta",{property:"og:type",content:"article"}),M&&r.createElement("meta",{property:"article:published_time",content:M}),r.createElement("title",null,i),r.createElement("meta",{name:"title",content:i}),r.createElement("meta",{property:"og:title",content:U}),V&&r.createElement("meta",{property:"fb:pages",content:V}),r.createElement("meta",{property:"al:android:url",content:D}),r.createElement("meta",{property:"al:ios:url",content:D}),r.createElement("meta",{property:"al:android:app_name",content:"Medium"}),a&&r.createElement("meta",{name:"description",content:a}),O&&r.createElement("meta",{property:"og:description",content:W}),r.createElement("meta",{property:"og:url",content:null!=k?k:void 0}),r.createElement("meta",{property:"al:web:url",content:null!=k?k:void 0}),P&&r.createElement("meta",{property:"og:image",content:P}),I&&r.createElement("meta",{property:"og:image:alt",content:I}),_&&r.createElement("meta",{property:"article:author",content:_}),_&&r.createElement("link",{rel:"author",href:_}),E&&r.createElement("meta",{name:"author",content:E}),r.createElement("link",{rel:"canonical",href:null!==(e=s||k)&&void 0!==e?e:void 0}),r.createElement("link",{rel:"alternate",href:(0,R.zi)((0,R.o2)("medium.com",d.id))}),r.createElement("meta",{name:"robots",content:"".concat(A?"noindex":"index",",follow,max-image-preview:large")}),r.createElement("meta",{name:"referrer",content:N||y?"origin":"unsafe-url"}),r.createElement("meta",{property:"twitter:title",content:U}),r.createElement("meta",{name:"twitter:site",content:"@".concat(j)}),r.createElement("meta",{name:"twitter:app:url:iphone",content:D}),O&&r.createElement("meta",{property:"twitter:description",content:W}),P&&r.createElement("meta",{name:"twitter:image:src",content:P}),I&&r.createElement("meta",{name:"twitter:image:alt",content:I}),r.createElement("meta",{name:"twitter:card",content:P?"summary_large_image":"summary"}),L&&r.createElement("meta",{name:"twitter:creator",content:"@".concat(L)}),r.createElement("meta",{name:"twitter:label1",content:"Reading time"}),r.createElement("meta",{name:"twitter:data1",content:"".concat(B," min read")}),r.createElement("meta",{name:"twitter:tile:template:testing",content:"2"}),P&&r.createElement("meta",{name:"twitter:tile:image",content:P}),I&&r.createElement("meta",{name:"twitter:tile:image:alt",content:I}),r.createElement("meta",{name:"twitter:tile:info1:icon",content:"Person"}),E&&r.createElement("meta",{name:"twitter:tile:info1:text",content:E}),r.createElement("meta",{name:"twitter:tile:info2:icon",content:"Calendar"}),p&&r.createElement("meta",{name:"twitter:tile:info2:text",content:(0,Pn.Z)(p,"LLL d, yyyy")}),r.createElement("meta",{name:"twitter:cta",content:"Read on Medium"}))}),[i,s,k,P,I,u,g,a,_,E,L,D,A,p,M]);return r.createElement(r.Fragment,null,G,r.createElement(Ln,{post:d,postDescription:a}))})),Hn=t(7834),zn=t(1444),Yn=t(15169),Zn=t(17878),$n=function(e){var n,t=e.post,i=e.socialPopoverPosition,a=void 0===i?"beginning":i,o=r.useContext(W.f).openSidebar,l=!!(0,de.H)().value,d=t.creator,s="clap_footer",c={post:t,source:"post_actions_footer"},m=(null==t||null===(n=t.postResponses)||void 0===n?void 0:n.count)||null;return r.createElement(r.Fragment,null,r.createElement(A.x,{display:"flex",justifyContent:"space-between",print:{display:"none"}},r.createElement(C.cW,{source:{name:"post_actions_footer"}},r.createElement(A.x,{display:"flex",flexDirection:"row",alignItems:"center"},r.createElement(A.x,{maxWidth:"155px"},r.createElement(Zn.e,null,r.createElement(V.S,{post:t,buttonStyle:"SUBTLE_MARGIN",hasDialog:!0,shouldShowResponsiveLabelText:!0,shouldHideClapsText:!0,susiEntry:s,buttonColor:"LIGHTER",countScale:"S"})),r.createElement(Zn.s,null,r.createElement(V.S,{post:t,buttonStyle:"SUBTLE_MARGIN",hasDialog:!0,shouldHideClapsText:!0,susiEntry:s,buttonColor:"LIGHTER",countScale:"S"}))),r.createElement(C.cW,{source:{name:"follow_footer",susiEntry:"follow_footer"}},r.createElement(A.x,{display:"flex",marginLeft:"24px"},r.createElement(U.h,{svgSize:"S",trackingData:{postId:t.id},responsesCount:m,allowResponses:t.allowResponses,isLimitedState:t.isLimitedState,handleClick:o,iconStylesOverride:{marginTop:"0px"},countStylesOverride:{marginLeft:"4px",marginTop:"0px"},disabledTooltipText:"Responses hidden"}))))),r.createElement(A.x,{display:"flex",alignItems:"center"},"beginning"===a&&r.createElement(Yn.I,c),r.createElement(A.x,{flexGrow:"0",marginLeft:"beginning"===a?"20px":void 0,marginRight:"20px"},r.createElement(C.cW,{source:{name:"post_actions_footer"}},r.createElement(zn.o,{post:t,susiEntry:"bookmark_footer",buttonStyle:"ICON_SUBTLE"}))),"end"===a&&r.createElement(A.x,{flexGrow:"0",marginRight:"20px"},r.createElement(Yn.I,c)),t&&d&&l&&r.createElement(K.t,{post:t}))))},qn=t(17235),Qn=t(53690),Xn=t(78271),Kn=t(50344),Jn=t(8969),et=t(45957),nt=function(e){return{fill:e.baseColor.fill.lighter}};function tt(e){switch(e){case"PUBLIC_DOMAIN":return"Except where otherwise noted, this work is in the public domain.";case"CC_40_ZERO":return"Except where otherwise noted, this work has been dedicated to the public domain using CC0.";default:return"Except where otherwise noted, this work is licensed under a ".concat(at(e,"title")," license by the author.")}}var it={PUBLIC_DOMAIN:{title:"Public Domain",link:"https://creativecommons.org/publicdomain/mark/1.0/"},CC_40_ZERO:{title:"Creative Commons copyright waiver",link:"http://creativecommons.org/publicdomain/zero/1.0/"},CC_40_BY:{title:"Creative Commons Attribution 4.0 International",link:"http://creativecommons.org/licenses/by/4.0/"},CC_40_BY_ND:{title:"Creative Commons Attribution-NoDerivatives 4.0 International",link:"https://creativecommons.org/licenses/by-nd/4.0/"},CC_40_BY_SA:{title:"Creative Commons Attribution-ShareAlike 4.0 International",link:"https://creativecommons.org/licenses/by-sa/4.0/"},CC_40_BY_NC:{title:"Creative Commons Attribution-NonCommercial 4.0 International",link:"https://creativecommons.org/licenses/by-nc/4.0/"},CC_40_BY_NC_ND:{title:"Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International",link:"https://creativecommons.org/licenses/by-nc-nd/4.0/"},CC_40_BY_NC_SA:{title:"Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International",link:"https://creativecommons.org/licenses/by-nc-sa/4.0/"}};function at(e,n){return it[e][n]}var ot=function(e){var n=e.license,t=(0,ge.I)();return n?r.createElement(A.x,{display:"inline"},r.createElement(A.x,{display:"inline-block"},r.createElement(ve.F,{scale:"M"},r.createElement(G._,{tooltipText:tt(n),maxWidth:300},r.createElement(Ve.r,{disableSourceParam:!0,href:at(n,"link"),linkStyle:"SUBTLE",inline:!0,target:"_blank"},function(e){switch(e){case"PUBLIC_DOMAIN":return"Public domain.";case"CC_40_ZERO":return"No rights reserved";default:return"Some rights reserved"}}(n))))),r.createElement(A.x,{display:"inline-block"},r.createElement(ve.F,{scale:"M"},"CC_40_ZERO"===n&&r.createElement("span",null," by the author."),r.createElement("span",{className:t(nt),style:{marginLeft:"5px",verticalAlign:"text-bottom"}},function(e){return{CC_40_ZERO:r.createElement(et.Z,null),CC_40_BY:r.createElement(Qn.Z,null),CC_40_BY_ND:r.createElement(r.Fragment,null,r.createElement(Qn.Z,null),r.createElement(Kn.Z,null)),CC_40_BY_SA:r.createElement(r.Fragment,null,r.createElement(Qn.Z,null),r.createElement(Jn.Z,null)),CC_40_BY_NC:r.createElement(r.Fragment,null,r.createElement(Qn.Z,null),r.createElement(Xn.Z,null)),CC_40_BY_NC_ND:r.createElement(r.Fragment,null,r.createElement(Qn.Z,null),r.createElement(Xn.Z,null),r.createElement(Kn.Z,null)),CC_40_BY_NC_SA:r.createElement(r.Fragment,null,r.createElement(Qn.Z,null),r.createElement(Xn.Z,null),r.createElement(Jn.Z,null)),PUBLIC_DOMAIN:r.createElement(r.Fragment,null)}[e]}(n))))):null},rt=t(73279),lt=t(42440),dt=function(e){var n=e.post,t=e.marginBottom,i=(null==n?void 0:n.tags)||[];return i.length?r.createElement(A.x,{display:"flex",flexWrap:"wrap","align-items":"flex-start",marginTop:"6px",marginBottom:t},i.map((function(e){return r.createElement(A.x,{display:"flex",marginTop:"8px",key:e.id},r.createElement(qn.P,{topic:e}))}))):null},st=function(){return r.createElement(A.x,{padding:"0 8px",display:"inline"},r.createElement(rt.O,{display:"inline",scale:"M"}))},ct=function(e){var n,t=e.post,i=t.visibility,a=t.license,o="UNLISTED"===i,l=!(!a||"ALL_RIGHTS_RESERVED"===a),d=!(null===(n=t.tags)||void 0===n||!n.length),s=o||l;return d||s?r.createElement(O.P,{size:"app"},r.createElement(dt,{post:t,marginBottom:s?"40px":"26px"}),s&&r.createElement(A.x,{marginTop:d?"0px":"12px",marginBottom:"26px"},o&&r.createElement(A.x,{display:"inline"},r.createElement(ve.F,{scale:"M",tag:"span"},r.createElement(lt.Z,null)," Unlisted")),o&&l&&r.createElement(st,null),l&&r.createElement(ot,{license:a}))):null},mt=t(60672),ut=t(67701);function pt(){var e=u()(["\n  query TopicViewerEdge($topicId: ID!) {\n    topic(id: $topicId) {\n      ... on Topic {\n        id\n        viewerEdge {\n          id\n          isFollowing\n        }\n      }\n    }\n  }\n"]);return pt=function(){return e},e}var kt,vt,gt=(0,k.Ps)(pt()),ft=t(75880),St=t(87757),ht=t.n(St),Nt=t(48926),yt=t.n(Nt),Et=t(73145),xt=t(28959),bt="post-view",Ft="post-read",wt="topic-view",Pt="medium-search",It="external-search",_t=(kt={},a()(kt,bt,200),a()(kt,Ft,200),a()(kt,wt,200),a()(kt,Pt,200),a()(kt,It,200),kt),Ot=(vt={},a()(vt,bt,new xt.Z("pv")),a()(vt,Ft,new xt.Z("pr")),a()(vt,wt,new xt.Z("tv")),a()(vt,Pt,new xt.Z("ms")),a()(vt,It,new xt.Z("es")),vt),Ct=function(e,n,t){var i=Ot[e];i.getCount()===_t[e]&&i.clean();try{i.set(n,t)}catch(e){i.clean()}},Tt=t(39202),Rt={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PostNoteMissingToastQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postMeteringOptions"}},type:{kind:"NamedType",name:{kind:"Name",value:"PostMeteringOptions"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"post"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"privateNotes"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postMeteringOptions"},value:{kind:"Variable",name:{kind:"Name",value:"postMeteringOptions"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"bodyModel"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"paragraphs"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]}}]}}]}}]},Dt=t(97480),At=t(98482),Mt=t(91583),Bt=t(66227),Lt=t(73917),jt=t(20113);function Vt(){return(Vt=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}).apply(this,arguments)}var Ut=r.createElement("path",{fill:"#fff",d:"M0 0h49v57H0z"}),Wt=r.createElement("path",{d:"M45.95 17.53v-.04l-.05-1.55a5.32 5.32 0 0 0-5.04-5.17c-5.8-.32-10.3-2.2-14.13-5.89l-.03-.03a3.26 3.26 0 0 0-4.4 0l-.03.03c-3.84 3.7-8.33 5.57-14.13 5.89-2.79.15-5 2.42-5.04 5.18l-.05 1.54v.1c-.11 5.84-.25 13.12 2.21 19.73 1.36 3.63 3.41 6.79 6.1 9.38 3.07 2.96 7.09 5.3 11.94 6.98a3.74 3.74 0 0 0 2.4 0c4.85-1.68 8.86-4.03 11.93-6.98 2.69-2.6 4.74-5.76 6.1-9.39 2.47-6.63 2.33-13.92 2.22-19.78zm-5 18.77c-2.6 6.96-7.9 11.74-16.23 14.62a.67.67 0 0 1-.45 0c-8.32-2.87-13.63-7.65-16.23-14.61-2.27-6.1-2.14-12.78-2.03-18.67v-.03c.03-.5.04-1.04.05-1.62.02-1.22 1-2.23 2.24-2.3 3.29-.18 6.17-.81 8.83-1.92 2.64-1.1 5-2.67 7.19-4.77.1-.1.25-.1.36 0a23.11 23.11 0 0 0 7.2 4.77 26.27 26.27 0 0 0 8.82 1.92 2.36 2.36 0 0 1 2.24 2.3c0 .58.02 1.12.05 1.62.11 5.9.24 12.59-2.04 18.69z",fill:"#757575"}),Gt=r.createElement("path",{d:"M24.5 17.76c-7.11 0-12.9 5.4-12.9 12.04 0 6.64 5.79 12.04 12.9 12.04s12.9-5.4 12.9-12.04c0-6.64-5.79-12.04-12.9-12.04zm0 21.25c-5.44 0-9.86-4.13-9.86-9.2 0-5.08 4.42-9.21 9.86-9.21 5.44 0 9.86 4.13 9.86 9.2 0 5.08-4.42 9.2-9.86 9.2z",fill:"#757575"}),Ht=r.createElement("path",{d:"M28.08 25.1l-5.64 6.12-1.53-1.66c-.56-.6-1.46-.6-2.02 0-.55.6-.55 1.59 0 2.2l2.54 2.75c.28.3.65.45 1.01.45.37 0 .73-.15 1.01-.45l6.65-7.22c.55-.6.55-1.59 0-2.2-.56-.6-1.47-.6-2.02 0z",fill:"#757575"});const zt=function(e){return r.createElement("svg",Vt({width:49,height:57,viewBox:"0 0 49 57",fill:"none"},e),Ut,Wt,Gt,Ht)};var Yt=(0,Ee.$j)()((function(e){var n=e.dispatch,t=e.isVisible,i=e.hide,a="limitedStateInterstitialDialogPopover";return r.createElement(Mt.V,{isVisible:t,hide:i,withCloseButton:!1,customBackgroundColor:"rgba(255, 255, 255, 0.94)"},r.createElement(A.x,{display:"flex",justifyContent:"center",paddingTop:"100px"},r.createElement(A.x,{height:"550px",width:"900px",background:oe.ix,borderRadius:"4px",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",boxShadow:"0 2px 10px ".concat((0,oe.Uy)(.15)),paddingBottom:"14px",md:{width:"600px",height:"auto",padding:"14px 8px"},sm:{width:"95vw !important",padding:"14px 8px"}},r.createElement(A.x,{display:"flex",flexDirection:"column",justifyContent:"center",height:"100%"},r.createElement(A.x,{paddingBottom:"24px"},r.createElement(zt,null)),r.createElement(A.x,{paddingBottom:"24px",paddingRight:"24px",paddingLeft:"24px"},r.createElement(jt.X6,{scale:"L"},"The following content was reported as a potential violation of Medium’s rules and is under investigation.")),r.createElement(A.x,{padding:"0 0 24px 0"},r.createElement(Xe.z,{buttonStyle:"BRAND",size:"REGULAR",onClick:function(){i(),n((0,Ue.Dx)({duration:"FOREVER",toastStyle:"LIMITED_STATE_BANNER"}))}},"I understand and want to proceed anyway"),r.createElement(Bt.B,null,(function(e){var n=e.isVisible,t=e.toggle,i=e.hide;return r.createElement(Lt.J,{ariaId:a,isVisible:n,hide:i,display:"block",customZIndex:800,popoverRenderFn:function(){return r.createElement(A.x,{padding:"15px 20px",width:"400px"},r.createElement(ve.F,{scale:"S"},"Anyone can publish on Medium, provided the content adheres to Medium’s rules and policies. When Medium is made aware of potential violations, the content is manually evaluated and appropriate action taken. Some features may be disabled while the content is under review."))},placement:"top",targetDistance:15},r.createElement(A.x,{paddingTop:"10px"},r.createElement(Ve.r,{"aria-controls":a,"aria-expanded":n?"true":"false",onClick:t},r.createElement("u",null,r.createElement(ve.F,{scale:"S"},"Why am I seeing this?")))))})))),r.createElement(A.x,{display:"flex",justifyContent:"center"},r.createElement(ve.F,{scale:"M"},"View our"," ",r.createElement(Ve.r,{href:"https://medium.com/policy/medium-rules-30e5502c4eb4",linkStyle:"OBVIOUS",inline:!0},"Rules,")," ",r.createElement(Ve.r,{href:"https://medium.com/policy/medium-terms-of-service-9db0094a1e0f",linkStyle:"OBVIOUS",inline:!0},"Terms of Service")," ","&"," ",r.createElement(Ve.r,{href:"https://medium.com/policy/medium-partner-program-terms-fcfe9cf777b8",linkStyle:"OBVIOUS",inline:!0},"Partner Program Terms"))))))}));function Zt(){var e=u()(["\n  fragment LimitedStateInterstitial_post on Post {\n    creator {\n      id\n    }\n    isLimitedState\n  }\n"]);return Zt=function(){return e},e}var $t=function(e){return function(){return{filter:e?"blur(10px)":"blur(0)"}}};function qt(e){var n=e.post,t=n.creator,i=n.isLimitedState,a=e.children,o=(0,de.H)().value,l=null==o?void 0:o.id,d=(0,ge.I)(),s=r.useState(!1),c=we()(s,2),m=c[0],u=c[1];return r.useEffect((function(){u(!0)}),[]),i&&(t&&t.id)!==l?r.createElement(Bt.B,{initialVisibility:!0},(function(e){var n=e.isVisible,t=e.hide;return r.createElement(r.Fragment,null,r.createElement("div",{className:d($t(n))},a),m&&r.createElement(Yt,{isVisible:n,hide:t}))})):a}(0,k.Ps)(Zt());var Qt=t(66018),Xt=t(93537),Kt=t(98223),Jt=function(){var e=(0,Ee.I0)(),n=(0,Ue.w)(),t=(0,r.useState)("loading"),i=we()(t,2),a=i[0],o=i[1],l=(0,r.useCallback)((function(t,i,a){o(i?"rendered":"not_eligible"),i&&(e((0,Xt.T)(!0)),n({toastStyle:"ALTERNATE_USER",duration:"FOREVER",extraParams:{userSocialLogins:a}}))}),[n]);return(0,r.useEffect)((function(){e((0,Kt.e)(!0))}),[]),(0,r.useEffect)((function(){"not_eligible"===a&&e((0,Kt.e)(!1))}),[a]),r.createElement(qe,{postRenderCallback:l})},ei=t(87498),ni=t(18634),ti=t(68821),ii=t(34135),ai=t(84509);var oi=t(26058),ri=t(68427),li=t(84739),di=t(3934),si=t(68216),ci=t(35558),mi=([{kind:"FragmentDefinition",name:{kind:"Name",value:"MoreFromPubAuthor_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"imageId"}},{kind:"FragmentSpread",name:{kind:"Name",value:"userUrl_user"}}]}}].concat(w()(si.$m.definitions)),[{kind:"FragmentDefinition",name:{kind:"Name",value:"MoreFromPubAuthor_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"FragmentSpread",name:{kind:"Name",value:"collectionUrl_collection"}}]}}].concat(w()(si.nf.definitions)),{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"AuthorCollectionRecircFeed"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AuthorCollectionRecircFeedInput"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"authorCollectionRecircFeed"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"post"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"GridPostPreview_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"StreamPostPreview_post"}}]}},{kind:"Field",name:{kind:"Name",value:"feedId"}}]}}]}}]}}].concat(w()(di.d.definitions),w()(ci.w.definitions))}),ui=t(82053),pi=t(4381),ki=t(43158),vi=t(47459),gi=function(e){return e.filter((function(e){return!(null==e||!e.feedId||null==e||!e.post)}))},fi=function(e){var n=e.item,t=n.feedId,i=n.post,a=e.index,o=e.source,l=e.lastIndex,d=(0,ae.F)(),s=(0,f.v9)((function(e){return e.client.viewerIsBot}));return r.createElement(ki.P,{size:{xs:12,sm:12,md:6,lg:6,xl:6}},r.createElement(A.x,{paddingBottom:{xs:"32px",sm:"32px",md:"56px",lg:"56px",xl:"56px"},height:"100%"},r.createElement(C.cW,{extendSource:!0,source:{name:o,index:a,feedId:s?void 0:t}},r.createElement(ui.w,{index:a,post:i,scale:"S",aspectRatio:pi.Pr.TwoToOne,lastIndex:l,dividerBreakpoints:[H.j.xs,H.j.sm],dividerColor:d.colorTokens.border.neutral.primary.base,miroImgFetchedWidth:679}))))},Si=function(e){var n=e.items,t=e.source;return r.createElement(vi.T,{alignItems:"stretch"},n.map((function(e,i){return r.createElement(fi,{key:e.post.id,item:e,index:i,source:t,lastIndex:n.length-1})})))},hi=t(41116),Ni=function(e){var n,t=e.postId,i=e.user,a=e.collection,l=(0,ae.F)(),d=(0,o.a)(mi,{variables:{input:{authorId:i.id,collectionId:null==a?void 0:a.id,postId:t,paging:{limit:4}}}}),s=d.loading,c=d.error,m=d.data,u=(null==m||null===(n=m.authorCollectionRecircFeed)||void 0===n?void 0:n.items)||[],p=gi(u),k=(0,li.B)(i);if(null==p||!p.length||s||c)return null;var v=1===(null==p?void 0:p.length);return r.createElement(r.Fragment,null,r.createElement(O.P,{size:"app"},r.createElement(A.x,{marginTop:"40px",marginBottom:"32px"},r.createElement(jt.X6,{scale:"XS"},"More from ",i.name,a&&" and ".concat(a.name))),v?r.createElement(r.Fragment,null,r.createElement(ni.y,{xs:!0,sm:!0},r.createElement(Si,{items:p,source:"author_recirc"})),r.createElement(ni.y,{md:!0,lg:!0,xl:!0},r.createElement(oi.j,{post:p[0].post,scale:"L",index:0,lastIndex:0,dividerColor:l.colorTokens.border.neutral.primary.base}))):r.createElement(Si,{items:p,source:"author_recirc"}),r.createElement(Dt.E,{marginTop:v?{xs:"32px",sm:"32px",md:"24px",lg:"24px",xl:"24px"}:void 0,marginBottom:{xs:"32px",sm:"32px",md:"24px",lg:"24px",xl:"24px"},borderColor:l.colorTokens.border.neutral.primary.base}),r.createElement(A.x,{display:"flex",flexDirection:{xs:"column",sm:"column",md:"row",lg:"row",xl:"row"}},r.createElement(hi.j,{href:k},"See all from ",null==i?void 0:i.name),a&&r.createElement(yi,{collection:a}))),r.createElement(Dt.E,{marginTop:{xs:"72px",sm:"72px",md:"96px",lg:"96px",xl:"96px"},borderColor:l.colorTokens.border.neutral.primary.base}))},yi=function(e){var n=e.collection,t=(0,ri.R)(n);return r.createElement(A.x,{marginTop:{xs:"16px",sm:"16px",md:"0px",lg:"0px",xl:"0px"},marginLeft:{xs:"0",sm:"0",md:"16px",lg:"16px",xl:"16px"}},r.createElement(hi.j,{href:t},"See all from ",null==n?void 0:n.name))},Ei=t(21043),xi=t(81360),bi=t(36764),Fi=t(92305),wi=t(54341),Pi=t(27048),Ii=t(18821),_i=t(89080),Oi=t(4088),Ci=t(82864),Ti={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"MoreFromListPostCard_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"UserAvatar_user"}},{kind:"FragmentSpread",name:{kind:"Name",value:"userUrl_user"}},{kind:"FragmentSpread",name:{kind:"Name",value:"UserMentionTooltip_user"}},{kind:"FragmentSpread",name:{kind:"Name",value:"useIsVerifiedBookAuthor_user"}}]}}].concat(w()(Pi.W.definitions),w()(si.$m.definitions),w()(wi.O.definitions),w()(Ii.H.definitions))},Ri={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"MoreFromListPostCard_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"readingTime"}},{kind:"Field",name:{kind:"Name",value:"createdAt"}},{kind:"Field",name:{kind:"Name",value:"isLocked"}},{kind:"Field",name:{kind:"Name",value:"visibility"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MoreFromListPostCard_user"}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CollectionLinkWithPopover_collection"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"usePostUrl_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"Star_post"}}]}}].concat(w()(Ti.definitions),w()(_i.W.definitions),w()(Oi.u.definitions),w()(Ci.W.definitions))},Di={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"MoreFromListQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"catalogId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"catalogById"},arguments:[{kind:"Argument",name:{kind:"Name",value:"catalogId"},value:{kind:"Variable",name:{kind:"Name",value:"catalogId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Catalog"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"catalogUrl_catalog"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"UserMentionTooltip_user"}}]}},{kind:"Field",name:{kind:"Name",value:"itemsConnection"},arguments:[{kind:"Argument",name:{kind:"Name",value:"pagingOptions"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"catalogItemId"}},{kind:"Field",name:{kind:"Name",value:"entity"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MoreFromListPostCard_post"}}]}}]}}]}}]}}]}}]}}].concat(w()(si.Ui.definitions),w()(wi.O.definitions),w()(Ri.definitions))},Ai=t(35989),Mi=t(25145),Bi=t(63459),Li=t(48342),ji=t(27323),Vi=t(52069),Ui=t(18305);function Wi(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function Gi(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Wi(Object(t),!0).forEach((function(n){a()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Wi(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Hi=(0,r.forwardRef)((function(e,n){var t=e.post,i=t.collection,a=t.creator,o=t.title,l=t.isLocked,d=t.readingTime,s=t.createdAt,c=(0,Mi.L)(t);return r.createElement(A.x,{marginRight:"16px",flexShrink:"0",ref:n},r.createElement(Ui.o,{post:Gi(Gi({},t),{},{previewContent:{isFullContent:!1}}),presentationContext:"POST_PREVIEW",shouldReportClientViewed:!1},r.createElement(ji.P,{href:c},r.createElement(A.x,{borderRadius:"4px",border:"BASE_LIGHTER",background:"white",width:"240px",height:"148px",padding:"24px",display:"flex",flexDirection:"column"},r.createElement(A.x,{flexGrow:"1",flexBasis:"0%"},a&&r.createElement(A.x,{display:"flex",alignItems:"center",marginBottom:"8px"},r.createElement(bi.h,{author:a,collection:i,includeAvatar:!0,includeVerifiedAuthorBadge:!0})),r.createElement(Vi.Dx,{scale:"XS",clamp:2},o)),r.createElement(A.x,{display:"flex",alignItems:"center"},l&&r.createElement(r.Fragment,null,r.createElement(Ai.U,{post:t,hideLabelDesktop:!0}),r.createElement(rt.O,{margin:"0 8px"})),d&&r.createElement(r.Fragment,null,r.createElement(ve.F,{scale:"S"},r.createElement(Li.K,{readingTime:d})),r.createElement(rt.O,{margin:"0 8px"})),r.createElement(ve.F,{scale:"S"},r.createElement(Bi.E,{timestamp:s})))))))})),zi=function(e){var n,t,i=e.catalogId,a=e.currentPostId,l=(0,ae.F)(),d=(0,f.v9)((function(e){return e.config.authDomain})),s=(0,Y.s)(),c=(0,r.useRef)(null),m=s===H.j.xs||s===H.j.sm?300:600,u=(0,o.a)(Di,{variables:{catalogId:i,limit:11}}),p=u.data;if(u.loading)return null;var k=null==p?void 0:p.catalogById;if("Catalog"!==(null==k?void 0:k.__typename))return null;var v=(0,R.yk)(k,d),g=null==k||null===(n=k.itemsConnection)||void 0===n||null===(t=n.items)||void 0===t?void 0:t.map((function(e){var n;return"Post"===(null===(n=e.entity)||void 0===n?void 0:n.__typename)?e.entity:void 0})).filter((function(e){return!!e&&e.id!==a})).slice(0,10);return g.length?r.createElement(C.cW,{extendSource:!0,source:{name:"list_recirc",catalogId:k.id}},r.createElement(A.x,{marginBottom:{xs:"40px",sm:"40px",md:"52px",lg:"52px",xl:"52px"}},r.createElement(Dt.E,{borderColor:l.colorTokens.border.neutral.tertiary.base,marginBottom:{xs:"30px",sm:"30px",md:"50px",lg:"50px",xl:"50px"}}),r.createElement(O.P,{size:"app"},r.createElement(jt.X6,{scale:"XS"},r.createElement(Ve.r,{href:v},'More from the list: "',(0,Fi.Ze)(k),'"')),r.createElement(A.x,{display:"flex",marginTop:"8px",alignItems:"center"},r.createElement(A.x,{flexShrink:"0",whiteSpace:"nowrap",marginRight:"4px"},r.createElement(ve.F,{scale:"S"},"Curated by")),r.createElement(bi.h,{author:k.creator}))),r.createElement(A.x,{margin:"24px 0",position:"relative"},r.createElement(xi.J,{firstItemRef:c,scrollPixels:m,arrowPadding:"8px"},r.createElement(A.x,{flexShrink:"0",width:"calc(50% - ".concat(Ei.d/2,"px)"),xs:{width:(0,M.a)(Ei.l6)},sm:{width:(0,M.a)(Ei.l6)}}),g.map((function(e,n){return r.createElement(Hi,{key:"".concat(e.id,"-").concat(n),post:e,ref:0===n?c:null})})))),r.createElement(O.P,{size:"app"},r.createElement(ve.F,{scale:"S",color:"ACCENT"},r.createElement(Ve.r,{href:v},"View list"))))):null},Yi=function(e){var n=e.currentPostId,t=(0,g.PM)(),i=(0,C.P7)(null!=t?t:"").catalogId;return i?r.createElement(zi,{catalogId:i,currentPostId:n}):null},Zi=t(92661),$i=t(60028),qi={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"MoreFromMediumQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"recirc"},arguments:[{kind:"Argument",name:{kind:"Name",value:"paging"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"6"}}]}},{kind:"Argument",name:{kind:"Name",value:"postId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"RexRecircItem"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"feedId"}},{kind:"Field",name:{kind:"Name",value:"post"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"GridPostPreview_post"}}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"postCatalogRecirc"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}},{kind:"Argument",name:{kind:"Name",value:"pagingOptions"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"4"}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"catalogs"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CatalogPreview_catalog"}}]}}]}}]}}].concat(w()(di.d.definitions),w()($i.N.definitions))},Qi=t(44266),Xi=t(18122),Ki=function(e){var n=e.list,t=(0,ce.Av)(),i=(0,C.pK)(),a=(0,r.useCallback)((function(){t.event("list.presented",{listId:n.id,source:i})}),[n.id,i]),o=(0,Xi.g)({onPresentedFn:a});return r.createElement(ki.P,{size:{xs:12,sm:12,md:6,lg:6,xl:6},ref:o},r.createElement(Qi.S,{catalog:n,titleMargin:"4px"}))},Ji=function(e){var n=e.lists,t=(0,ae.F)();return r.createElement(r.Fragment,null,r.createElement(Dt.E,{marginBottom:"40px",borderColor:t.colorTokens.border.neutral.primary.base}),r.createElement(jt.X6,{scale:"XS"},"Lists"),r.createElement(A.x,{marginTop:"32px"},r.createElement(C.cW,{extendSource:!0,source:{name:"read_next_recirc"}},r.createElement(vi.T,{alignItems:"flex-start"},n.map((function(e){return r.createElement(Ki,{key:e.id,list:e})}))))),r.createElement(Dt.E,{marginTop:{xs:"16px",sm:"16px",md:"24px",lg:"24px",xl:"24px"},marginBottom:{xs:"32px",sm:"32px",md:"56px",lg:"56px",xl:"56px"},borderColor:t.colorTokens.border.neutral.primary.base}))},ea=function(e){var n,t=e.postId,i=(0,ae.F)(),a=(0,Zi.qt)("ShowHome",{}),l=(0,o.a)(qi,{variables:{postId:t,limit:6},skip:!t}),d=l.loading,s=l.error,c=l.data,m=null==c||null===(n=c.recirc)||void 0===n?void 0:n.items,u=null==c?void 0:c.postCatalogRecirc.catalogs;if(null==m||!m.length||d||s)return null;var p=gi(m),k=p.slice(0,2),v=p.slice(2);return r.createElement(O.P,{size:"app"},r.createElement(A.x,{paddingTop:"88px",paddingBottom:"40px"},r.createElement(jt.X6,{scale:{xs:"S",sm:"S",md:"M",lg:"M",xl:"M"}},"Recommended from Medium"),r.createElement(A.x,{marginTop:{xs:"40px",sm:"40px",md:"56px",lg:"56px",xl:"56px"}},r.createElement(Si,{items:k,source:"read_next_recirc"})),null!=u&&u.length?r.createElement(Ji,{lists:u}):null,r.createElement(Si,{items:v,source:"read_next_recirc"}),r.createElement(Dt.E,{marginBottom:{xs:"32px",sm:"32px",md:"24px",lg:"24px",xl:"24px"},borderColor:i.colorTokens.border.neutral.primary.base}),r.createElement(hi.j,{href:a},"See more recommendations")))},na=t(937),ta=t(74419),ia=t(80350),aa=t(32223),oa=t(5422),ra=t(47834),la=t(65968),da=t(64238),sa=t(26700),ca=t(31711),ma=t(67713),ua=t(68356),pa=t.n(ua),ka=t(50742),va=pa()({loading:function(){return null},loader:function(){return t.e(9076).then(t.bind(t,26766))},modules:["./GiveTipButton"],webpack:function(){return[26766]},render:(0,ka.n)("GiveTipButton")}),ga=function(e){var n=e.user,t=e.postId,i=(0,de.H)().value,a=i&&i.id===n.id,o=(0,Zi.H2)(),l=(0,xe.VB)({name:"can_send_tips_v0",placeholder:!1}),d="rgba(26, 137, 23, 1)"!==(0,ae.F)().accentColor.fill.normal,s=(0,S.Rk)(o("ShowSettingsTab",{setting:aa.B.Account}),{},oa.el);return r.createElement(r.Fragment,null,a?r.createElement(Xe.z,{buttonStyle:d?"STRONG":"BRAND",size:"SMALL",href:s},r.createElement(A.x,{whiteSpace:"nowrap"},"Edit profile")):r.createElement(C.cW,{source:{name:"publisher_header_actions"},extendSource:!0},r.createElement(A.x,{display:"flex"},r.createElement(ca.N,{creator:n,followButtonSize:"REGULAR",susiEntry:"follow_profile",showMembershipUpsellModal:!0,width:"auto",buttonStyleFn:function(e){return function(e){return d?e?"OBVIOUS":"STRONG":e?"SUBTLE":"BRAND"}(e)}}),l&&r.createElement(va,{creatorId:n.id,postId:t,buttonStyle:d?"STRONG":"BRAND"}))))},fa=function(e){var n,t=e.user,i=e.collection,a=!(null===(n=i.editors)||void 0===n||!n.find((function(e){var n;return(null==e||null===(n=e.user)||void 0===n?void 0:n.id)===t.id}))),o=(0,ma.n)({name:"detail",scale:"M",color:"LIGHTER",clamp:1}),l=(0,ge.I)();return r.createElement("div",{className:l([o,{display:"flex",whiteSpace:"pre-wrap"}])},r.createElement(rt.O,{margin:"0 8px"}),r.createElement(A.x,{tag:"span",flexShrink:"0"},a?"Editor for ":"Writer for "),r.createElement(sa.q,{collection:i,clamp:1}))},Sa=function(e){var n=e.user,t=e.postId,i=e.collection,a=(0,ae.F)(),o=(0,li.B)(n),l=(0,da.o)(n),d=(0,Y.s)(),s=d===H.j.xs||d===H.j.sm,c=s?64:72,m=s?24:32;return r.createElement(O.P,{size:"app"},r.createElement(A.x,{marginBottom:"16px",display:"flex",justifyContent:"space-between",alignItems:"flex-end"},r.createElement(ra.j,{author:n,collection:i,authorSize:c,collectionImageSize:m,collectionOffset:"-16px",borderColor:a.baseColor.background.light}),r.createElement(ni.y,{xs:!0,sm:!0},r.createElement(ga,{user:n,postId:t}))),r.createElement(A.x,{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},r.createElement(A.x,null,r.createElement(A.x,{display:"flex",alignItems:"center"},r.createElement(Ve.r,{href:o,rules:{display:"flex",alignItems:"center"}},r.createElement(ta.i,{prefix:"Written by ",publisher:n,scale:"M"})),l&&r.createElement(la.G,{marginLeft:"2px",marginTop:"1px",size:"M",userId:n.id,alignSelf:{xs:"flex-end",sm:void 0,md:void 0,lg:void 0,xl:void 0}})),r.createElement(A.x,{marginTop:"8px",display:"flex"},r.createElement(A.x,{flexShrink:"0"},r.createElement(ia.e,{publisher:n,scale:"M",color:"DARKER",inline:!0,showWhenZero:!0})),i&&r.createElement(fa,{user:n,collection:i})),r.createElement(A.x,{marginTop:"16px"},r.createElement(na.y,{publisher:n,color:"DARKER"}))),r.createElement(ni.y,{md:!0,lg:!0,xl:!0},r.createElement(ga,{user:n,postId:t}))),r.createElement(Dt.E,{marginTop:{xs:"32px",sm:"32px",md:"40px",lg:"40px",xl:"40px"},borderColor:a.colorTokens.border.neutral.primary.base}))},ha=function(e){var n=e.post,t=e.meteringInfo,i=(0,ae.F)(),a=r.useRef(null),d=(0,de.H)().value,s=n.isLocked,c=n.collection,m=n.creator,u=n.content.isLockedPreviewOnly,p=(0,wn.D)(n,a,t),k=!!n.inResponseToEntityType,v=s?{className:"meteredContent"}:{},S=(0,xe.VB)({name:"enable_zen_post_page_recircs",placeholder:!1}),h=(c||{}).googleAnalyticsId;return(0,ne.t)({ids:h?[h]:null}),(0,ti.V)(a,n),function(e,n,t){var i=(0,ce.Av)(),a=(0,C.pK)(),o=(0,r.useState)(!1),l=we()(o,2),d=l[0],s=l[1],c=(0,Ee.I0)(),m=(0,ie.k)();(0,r.useEffect)((function(){if(!d&&t){var o=function(){if(n.current&&!d){var o,r=(0,ai.L6)(n.current),l=(0,ai.tM)(r),u=l.top+l.height,p=(0,ai.tM)((0,ai.t_)()),k=p.top+p.height;if(!t.content.isLockedPreviewOnly&&k>=u-100&&a.includes("post_page")){s(!0),c((0,Ue.C2)(!0));var v={source:a,postId:t.id,collectionSlug:t.collection?t.collection.slug:"",sequenceId:t.sequence?t.sequence.sequenceId:""};i.event("post.clientRead",v),m&&(m.setLocalAttribute("latest.post.clientRead.url",window.location.href),v.postId&&m.setLocalAttribute("latest.post.clientRead.postId",v.postId),v.source&&m.setLocalAttribute("latest.post.clientRead.source",v.source)),e||(o=t.id,Ct(Ft,o,Date.now()))}}};return ii.V6.on("scroll_end",o),function(){ii.V6.off("scroll_end",o)}}}),[d,t,m]),(0,r.useEffect)((function(){return function(){c((0,Ue.C2)(!1))}}),[])}(!!d,a,n),function(e){var n=e.post,t=e.clientViewedContext,i=void 0===t?1:t,a=e.overrideCommonData,l=void 0===a?{}:a;(function(e){var n,t,i=e.post,a=e.meteringInfo,r=(0,f.v9)((function(e){return e.config.authDomain})),l=null==i?void 0:i.id,d=(0,ft.Pd)(null==i?void 0:i.creator),s=d.viewerEdge,c=d.loading,m=(0,ut.gY)(null==i?void 0:i.collection),u=m.viewerEdge,p=m.loading,k=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=(0,o.a)(gt,{variables:{topicId:n},ssr:!1,skip:!n}),i=t.loading,a=t.error,r=t.data;return i?{loading:i}:a?{error:a}:{viewerEdge:null==r||null===(e=r.topic)||void 0===e?void 0:e.viewerEdge}}(null==i||null===(n=i.primaryTopic)||void 0===n?void 0:n.id),v=k.viewerEdge,g=k.loading,S=p||c||g;(0,mt.e)({data:{canonicalUrl:l&&null!=i&&null!==(t=i.collection)&&void 0!==t&&t.domain?(0,R.o2)(r,l):void 0,creatorViewerEdge:s,collectionViewerEdge:u,meteringInfo:a,post:i||void 0,topicViewerEdge:v},loading:!l||S||!(null!=i&&i.isPublished),show:!0})})({post:n,meteringInfo:e.meteringInfo}),function(e){var n=e.post,t=e.clientViewedContext,i=e.overrideCommonData,a=void 0===i?{}:i,o=(0,ce.Av)(),l=(0,be.r)(),d=l.loading,s=l.viewerId,c=(0,f.v9)((function(e){return e.client.viewerIsBot})),m=s&&(0,hn.Q)(s),u=(null==n?void 0:n.collection)||{},p=u.id,k=u.slug,v=((null==n?void 0:n.content)||{}).validatedShareKey,g=null==n?void 0:n.id,S=r.useState(!1),h=we()(S,2),N=h[0],y=h[1],E=r.useState(null),x=we()(E,2),b=x[0],F=x[1],w=r.useCallback(yt()(ht().mark((function e(){var n,t,i;return ht().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Et.r)();case 2:t=e.sent,i=null!==(n="Unknown"===t.browserName||t.isPrivate)&&void 0!==n?n:null,y(!0),F(i);case 6:case"end":return e.stop()}}),e)}))),[]);r.useEffect((function(){if(!d&&g&&s&&N){if(null!=n&&n.isPublished){m||(n.isLocked?(0,Ce.yB)():(0,Ce.B8)());var e=(0,An.c_)(n),i=e.shouldIndexPost,r=e.indexReason;c&&o.event("post.clientBotCrawled",{postId:g,userId:s,userAgent:navigator.userAgent,lastCrawledAt:Date.now(),isIndexable:i,indexReason:r}),o.event("post.clientViewed",{postId:g,collectionId:p,collectionSlug:k,context:t,isFriendLink:!!v,source:"post_page",isIncognitoMode:b,isTruncated:n.content.isLockedPreviewOnly},a)}else o.event("post.draftViewed",{postId:g});m||function(e){Ct(bt,e,Date.now())}(g)}else N||w()}),[g,s,d,b,w])}({post:n,clientViewedContext:i,overrideCommonData:l})}({post:n,meteringInfo:t}),function(e){var n=(0,de.H)().value,t=(0,yn.D)(bn,{variables:{postId:e.id}}),i=we()(t,2),a=i[0],o=i[1].called;r.useEffect((function(){e.isPublished||null==n||!n.id||o||a()}),[n])}(n),function(){var e=(0,Ue.w)(),n=r.useState(!0),t=we()(n,2),i=t[0],a=t[1],o=(0,de.H)().value,l=(0,f.p9)((function(e){return e.session.xsrf})),d=(0,g.PM)(),s=(0,C.P7)(d||"").name;r.useEffect((function(){function e(){return(e=yt()(ht().mark((function e(){var n;return ht().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,Ce.vA)(o.id,l);case 4:n=e.sent,a(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[null==o?void 0:o.id,l]),r.useEffect((function(){null!=o&&o.createdAt&&(new Date).getTime()-o.createdAt>5*ei.uD&&!i&&"login"===s&&(e({toastStyle:"SIGN_IN_CONFIRMATION",duration:"FOREVER"}),a(!0),(0,Ce.oy)(o.id,l))}),[o,i,e,s,l])}(),function(e){var n,t,i,a,d,s=(0,l.TH)().hash,c=null==s||null===(n=s.replace("#",""))||void 0===n?void 0:n.split("-"),m=we()(c,2),u=m[0],p=m[1],k=(0,f.v9)((function(e){return e.navigation.referrer})),v=(0,g.G1)(),S=(0,g.PM)(),h=(0,o.a)(Rt,{variables:{postId:null==e?void 0:e.id,postMeteringOptions:{referrer:k,sk:v,source:S}},ssr:!1,skip:!p}),N=h.loading,y=h.error,E=h.data,x=(null!=E?E:{}).post,b=null==x||null===(t=x.privateNotes)||void 0===t?void 0:t.find((function(e){return(null==e?void 0:e.id)===p})),F=null!==(i=null==x||null===(a=x.content)||void 0===a||null===(d=a.bodyModel)||void 0===d?void 0:d.paragraphs)&&void 0!==i?i:[],w=new Set(F.map((function(e){return e.name})).filter(Tt.b)),P=!!b&&w.has(u),I=!(N||y||!p||P),_=(0,Ee.I0)();(0,r.useEffect)((function(){I&&_((0,Ue.Dx)({duration:"NEXTPAGE",message:"The note you're looking for was deleted."}))}),[I,_,Ue.Dx])}(n),r.createElement(A.x,null,!n.isLocked&&!!d&&r.createElement(te.T,null),r.createElement(At.k,{post:n},r.createElement(Gn,{post:n}),r.createElement(Jt,null),r.createElement(Qt.Lv,{post:n,user:m,forceLoad:(null==d?void 0:d.id)===(null==m?void 0:m.id)}),r.createElement(A.x,{marginBottom:{xs:"4px",sm:"4px",md:"68px",lg:"68px",xl:"68px"}},r.createElement(O.P,{size:"app"},k&&r.createElement(A.x,{marginTop:{xs:"32px",sm:"32px",md:"40px",lg:"40px",xl:"40px"},marginBottom:{xs:"32px",sm:"32px",md:"40px",lg:"40px",xl:"40px"}},r.createElement(Fn.h,{post:n}))),r.createElement("article",v,r.createElement(A.x,null,r.createElement(qt,{post:n},r.createElement(A.x,null,r.createElement(Hn.b,{isAuroraPostPageEnabled:!0,post:n,ref:a,richTextStyle:"FULL_PAGE",postBodyInserts:p}))))),r.createElement(O.P,{size:"app"},r.createElement(Nn,{post:n,meteringInfo:t,excludePadding:!0}))),r.createElement(J,{post:n,isSingleColumn:!0}),!u&&r.createElement(ct,{post:n}),r.createElement(B,{isDockingEnabled:!1,undockedBackgroundColor:"BACKGROUND",maxWidthSize:"app",marginBottom:{xs:"80px",sm:"80px",md:"88px",lg:"88px",xl:"88px"}},r.createElement($n,{post:n,socialPopoverPosition:"end"}))),r.createElement(Yi,{currentPostId:n.id}),r.createElement(A.x,{backgroundColor:"BASE_LIGHT",paddingTop:{xs:"48px",sm:"48px",md:"72px",lg:"72px",xl:"72px"}},m&&r.createElement(r.Fragment,null,r.createElement(Sa,{user:m,postId:n.id,collection:c}),S&&r.createElement(Ni,{postId:n.id,user:m,collection:c})),S&&r.createElement(ea,{postId:n.id}),r.createElement(ni.y,{lg:!0,xl:!0},r.createElement(Dt.E,{marginTop:"72px",borderColor:i.colorTokens.border.neutral.primary.base}),r.createElement(O.P,{size:"app"},r.createElement(ee.q,{padding:"24px 0",spacing:"L",detailScale:"S"})))))},Na=t(27628),ya=t(9970),Ea=t(57831),xa=t(1279),ba=t(84492),Fa=t(84683),wa={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostAuthorInfo_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"imageId"}},{kind:"Field",name:{kind:"Name",value:"mediumMemberAt"}},{kind:"FragmentSpread",name:{kind:"Name",value:"useIsVerifiedBookAuthor_user"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PublisherName_publisher"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PublisherFollowersCount_publisher"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PublisherDescription_publisher"}},{kind:"FragmentSpread",name:{kind:"Name",value:"FollowAndSubscribeButtons_user"}}]}}].concat(w()(Ii.H.definitions),w()(ya.g.definitions),w()(Ea.h.definitions),w()(xa.m.definitions),w()(ba.i.definitions))},Pa={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostAuthorInfo_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"editors"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"CollectionAvatar_collection"}},{kind:"FragmentSpread",name:{kind:"Name",value:"CollectionLinkWithPopover_collection"}}]}}].concat(w()(Fa.d.definitions),w()(_i.W.definitions))},Ia=t(24176),_a=t(55193),Oa=t(70762),Ca=t(36299),Ta=t(27448),Ra=t(31228),Da=t(32934),Aa={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostJsonLd_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"seoTitle"}},{kind:"Field",name:{kind:"Name",value:"mediumUrl"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"username"}},{kind:"FragmentSpread",name:{kind:"Name",value:"userUrl_user"}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"domain"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"Field",name:{kind:"Name",value:"logo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"originalWidth"}},{kind:"Field",name:{kind:"Name",value:"originalHeight"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"previewImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"focusPercentX"}},{kind:"Field",name:{kind:"Name",value:"focusPercentY"}},{kind:"Field",name:{kind:"Name",value:"originalWidth"}},{kind:"Field",name:{kind:"Name",value:"originalHeight"}}]}},{kind:"Field",name:{kind:"Name",value:"isLocked"}},{kind:"Field",name:{kind:"Name",value:"firstPublishedAt"}},{kind:"Field",name:{kind:"Name",value:"updatedAt"}},{kind:"Field",name:{kind:"Name",value:"isShortform"}},{kind:"Field",name:{kind:"Name",value:"shortformType"}},{kind:"FragmentSpread",name:{kind:"Name",value:"getTitleForPost_post"}}]}}].concat(w()(si.$m.definitions),w()(Da.bq.definitions))},Ma=t(97849),Ba={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostMetadata_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"socialTitle"}},{kind:"Field",name:{kind:"Name",value:"socialDek"}},{kind:"Field",name:{kind:"Name",value:"noIndex"}},{kind:"Field",name:{kind:"Name",value:"canonicalUrl"}},{kind:"Field",name:{kind:"Name",value:"mediumUrl"}},{kind:"Field",name:{kind:"Name",value:"metaDescription"}},{kind:"Field",name:{kind:"Name",value:"latestPublishedAt"}},{kind:"Field",name:{kind:"Name",value:"visibility"}},{kind:"Field",name:{kind:"Name",value:"isLimitedState"}},{kind:"Field",name:{kind:"Name",value:"readingTime"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"twitterScreenName"}},{kind:"FragmentSpread",name:{kind:"Name",value:"userUrl_user"}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"twitterUsername"}},{kind:"Field",name:{kind:"Name",value:"facebookPageId"}}]}},{kind:"Field",name:{kind:"Name",value:"previewContent"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"subtitle"}}]}},{kind:"Field",name:{kind:"Name",value:"previewImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"alt"}},{kind:"Field",name:{kind:"Name",value:"focusPercentX"}},{kind:"Field",name:{kind:"Name",value:"focusPercentY"}},{kind:"Field",name:{kind:"Name",value:"originalHeight"}},{kind:"Field",name:{kind:"Name",value:"originalWidth"}}]}},{kind:"Field",name:{kind:"Name",value:"isShortform"}},{kind:"Field",name:{kind:"Name",value:"noIndex"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostJsonLd_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"postMetaDescription_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"shortformPostMetaDescription_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"shouldIndexPost_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"shortformPostTitle_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"getTitleDetails_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"getTitleForPost_post"}}]}}].concat(w()(si.$m.definitions),w()(Aa.definitions),w()(Ma.i.definitions),w()(Ma.m.definitions),w()(Da.HF.definitions),w()(Da.Pz.definitions),w()(Da.dm.definitions),w()(Da.bq.definitions))},La={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostFooterInfo_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"license"}},{kind:"Field",name:{kind:"Name",value:"visibility"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostFooterTags_post"}}]}}].concat(w()([{kind:"FragmentDefinition",name:{kind:"Name",value:"PostFooterTags_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"tags"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"displayTitle"}},{kind:"Field",name:{kind:"Name",value:"normalizedTagSlug"}}]}}]}}]))},ja=t(22330),Va=t(78693),Ua=t(62549),Wa=t(17828),Ga=t(7887),Ha=t(23515),za={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostByline_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"FragmentSpread",name:{kind:"Name",value:"useIsVerifiedBookAuthor_user"}},{kind:"FragmentSpread",name:{kind:"Name",value:"userUrl_user"}},{kind:"FragmentSpread",name:{kind:"Name",value:"UserMentionTooltip_user"}},{kind:"FragmentSpread",name:{kind:"Name",value:"UserFollowButton_user"}}]}}].concat(w()(Ii.H.definitions),w()(si.$m.definitions),w()(wi.O.definitions),w()(Va.s.definitions))},Ya={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostByline_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"postResponses"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"count"}}]}},{kind:"Field",name:{kind:"Name",value:"allowResponses"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CollectionLinkWithPopover_collection"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"DraftStatus_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"shouldShowPublishedInStatus_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostSharePopover_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"OverflowMenuButtonWithNegativeSignal_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"MultiVote_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostPageBookmarkButton_post"}}]}}].concat(w()(_i.W.definitions),w()(Ua.t.definitions),w()(Wa.w.definitions),w()(Ga.G.definitions),w()($.v.definitions),w()(Z.x.definitions),w()(Ha.S.definitions))},Za={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostPageMeter_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"UpsellClickable_post"}}]}}].concat(w()([{kind:"FragmentDefinition",name:{kind:"Name",value:"UpsellClickable_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"sequence"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sequenceId"}}]}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}}]))},$a=[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostPageMeter_meteringInfo"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MeteringInfo"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"postIds"}},{kind:"Field",name:{kind:"Name",value:"unlocksRemaining"}}]}}],qa={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostBodyInserts_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"OverlappingAvatars_collection"}}]}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"OverlappingAvatars_user"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostByline_user"}}]}},{kind:"Field",name:{kind:"Name",value:"firstPublishedAt"}},{kind:"Field",name:{kind:"Name",value:"isLocked"}},{kind:"Field",name:{kind:"Name",value:"isShortform"}},{kind:"Field",name:{kind:"Name",value:"readingTime"}},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postMeteringOptions"},value:{kind:"Variable",name:{kind:"Name",value:"postMeteringOptions"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isLockedPreviewOnly"}},{kind:"Field",name:{kind:"Name",value:"bodyModel"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"paragraphs"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"text"}},{kind:"Field",name:{kind:"Name",value:"type"}}]}},{kind:"Field",name:{kind:"Name",value:"sections"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"startIndex"}}]}}]}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostByline_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"useShouldShowPostPageMeter_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostPageMeter_post"}}]}}].concat(w()(ja.RD.definitions),w()(ja.Ki.definitions),w()(za.definitions),w()(Ya.definitions),w()([{kind:"FragmentDefinition",name:{kind:"Name",value:"useShouldShowPostPageMeter_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"isLocked"}},{kind:"Field",name:{kind:"Name",value:"lockedSource"}}]}}]),w()(Za.definitions))},Qa={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostBodyInserts_meteringInfo"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MeteringInfo"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"useShouldShowPostPageMeter_meteringInfo"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostPageMeter_meteringInfo"}}]}}].concat(w()([{kind:"FragmentDefinition",name:{kind:"Name",value:"useShouldShowPostPageMeter_meteringInfo"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MeteringInfo"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"postIds"}}]}}]),w()($a))},Xa={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"usePostClientViewedReporter_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isPublished"}},{kind:"Field",name:{kind:"Name",value:"isLocked"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"slug"}}]}},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postMeteringOptions"},value:{kind:"Variable",name:{kind:"Name",value:"postMeteringOptions"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"validatedShareKey"}},{kind:"Field",name:{kind:"Name",value:"isLockedPreviewOnly"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"shouldIndexPost_post"}}]}}].concat(w()(Da.HF.definitions))},Ka={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"usePostBranchView_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isPublished"}},{kind:"Field",name:{kind:"Name",value:"isLocked"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"Field",name:{kind:"Name",value:"domain"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"buildBranchViewData_post"}}]}}].concat(w()([{kind:"FragmentDefinition",name:{kind:"Name",value:"buildBranchViewData_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"layerCake"}},{kind:"Field",name:{kind:"Name",value:"primaryTopic"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postMeteringOptions"},value:{kind:"Variable",name:{kind:"Name",value:"postMeteringOptions"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isLockedPreviewOnly"}}]}}]}}]))},Ja={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"usePostBranchView_meteringInfo"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MeteringInfo"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"buildBranchViewData_meteringInfo"}}]}}].concat(w()([{kind:"FragmentDefinition",name:{kind:"Name",value:"buildBranchViewData_meteringInfo"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MeteringInfo"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"postIds"}}]}}]))},eo={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"usePostTracking_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"usePostClientViewedReporter_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"usePostBranchView_post"}}]}}].concat(w()(Xa.definitions),w()(Ka.definitions))},no=([{kind:"FragmentDefinition",name:{kind:"Name",value:"usePostTracking_meteringInfo"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MeteringInfo"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"usePostBranchView_meteringInfo"}}]}}].concat(w()(Ja.definitions)),t(56785)),to={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PostPageQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postMeteringOptions"}},type:{kind:"NamedType",name:{kind:"Name",value:"PostMeteringOptions"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"postResult"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostResultError_postResult"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"googleAnalyticsId"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostAuthorInfo_collection"}}]}},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postMeteringOptions"},value:{kind:"Variable",name:{kind:"Name",value:"postMeteringOptions"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isLockedPreviewOnly"}}]}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"MastodonVerificationLink_user"}},{kind:"FragmentSpread",name:{kind:"Name",value:"SuspendedBannerLoader_user"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostAuthorInfo_user"}}]}},{kind:"Field",name:{kind:"Name",value:"inResponseToEntityType"}},{kind:"Field",name:{kind:"Name",value:"isLocked"}},{kind:"FragmentSpread",name:{kind:"Name",value:"Wall_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"InteractivePostBody_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"WithResponsesSidebar_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostCanonicalizer_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostFooterActionsBar_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostReadTracker_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostMetadata_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"SuspendedBannerLoader_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostFooterInfo_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostBodyInserts_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostNoteMissingToast_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"usePostTracking_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"InResponseToEntityPreview_post"}}]}}]}}]}}].concat(w()(Na.i.definitions),w()(Pa.definitions),w()(Ia.G.definitions),w()(_a.v.definitions),w()(wa.definitions),w()(Oa.r.definitions),w()(Ca.Uw.definitions),w()(Ta.y.definitions),w()([{kind:"FragmentDefinition",name:{kind:"Name",value:"PostCanonicalizer_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mediumUrl"}}]}}]),w()(Ra.R.definitions),w()([{kind:"FragmentDefinition",name:{kind:"Name",value:"PostReadTracker_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"slug"}}]}},{kind:"Field",name:{kind:"Name",value:"sequence"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sequenceId"}}]}},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postMeteringOptions"},value:{kind:"Variable",name:{kind:"Name",value:"postMeteringOptions"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isLockedPreviewOnly"}}]}}]}}]),w()(Ba.definitions),w()(_a.Q.definitions),w()(La.definitions),w()(qa.definitions),w()([{kind:"FragmentDefinition",name:{kind:"Name",value:"PostNoteMissingToast_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]),w()(eo.definitions),w()(no.V.definitions))},io=t(60600),ao=function(){var e=(0,Y.s)()||H.j.lg,n=e===H.j.xs||e===H.j.sm?2:3;return r.createElement(A.x,{height:"100vh"},r.createElement(A.x,{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"space-between",marginBottom:"16px",width:"100%",marginTop:"48px"},r.createElement(A.x,{width:"80%",height:{xs:"40px",sm:"40px",md:"48px",lg:"48px",xl:"48px"},marginBottom:"24px",backgroundColor:"BASE_NORMAL"}),r.createElement(A.x,{display:"flex",marginBottom:{xs:"44px",sm:"44px",md:"52px",lg:"52px",xl:"52px"}},r.createElement(A.x,{height:"44px",width:"44px",backgroundColor:"BASE_NORMAL",borderRadius:"50%",marginRight:"12px"}),r.createElement(A.x,{margin:"auto 0"},r.createElement(A.x,{height:"16px",marginBottom:"4px",width:"120px",backgroundColor:"BASE_NORMAL"}),r.createElement(A.x,{height:"16px",width:"80px",backgroundColor:"BASE_NORMAL"}))),Array.from(Array(n)).map((function(e,n){return r.createElement(A.x,{key:n,width:"100%",marginBottom:{xs:"32px",sm:"32px",md:"48px",lg:"48px",xl:"48px"}},r.createElement(A.x,{width:"96%",height:"24px",marginBottom:"8px",backgroundColor:"BASE_NORMAL"}),r.createElement(A.x,{width:"98%",height:"24px",marginBottom:"8px",backgroundColor:"BASE_NORMAL"}),r.createElement(A.x,{width:"100%",height:"24px",marginBottom:"8px",backgroundColor:"BASE_NORMAL"}),r.createElement(A.x,{width:"98%",height:"24px",marginBottom:"8px",backgroundColor:"BASE_NORMAL"}),r.createElement(A.x,{width:"81%",height:"24px",backgroundColor:"BASE_NORMAL"}))}))))},oo=function(){return r.createElement(io.f,{itemPlaceholder:ao,numPlaceholders:1})},ro={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"usePostPageMeterQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postMeteringOptions"}},type:{kind:"NamedType",name:{kind:"Name",value:"PostMeteringOptions"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"meterPost"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}},{kind:"Argument",name:{kind:"Name",value:"postMeteringOptions"},value:{kind:"Variable",name:{kind:"Name",value:"postMeteringOptions"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MeteringInfo"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"postIds"}},{kind:"Field",name:{kind:"Name",value:"maxUnlockCount"}},{kind:"Field",name:{kind:"Name",value:"unlocksRemaining"}},{kind:"FragmentSpread",name:{kind:"Name",value:"Wall_meteringInfo"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostPageMeter_meteringInfo"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostBodyInserts_meteringInfo"}}]}}]}}]}}].concat(w()(Oa.Y.definitions),w()($a),w()(Qa.definitions))};function lo(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function so(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?lo(Object(t),!0).forEach((function(n){a()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):lo(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var co=function(e){var n,t,i,a,l,d=(0,R.mr)({params:e})||"",s=function(e){var n=e.params,t={referrer:(0,f.v9)((function(e){return e.navigation.referrer})),sk:(0,g.G1)(),source:(0,g.PM)()},i=(0,R.mr)({params:n||{}})||"",a=(0,xe.dd)("enable_maim_the_meter"),r=a.value,l=a.loading;return(0,o.a)(ro,{variables:{postId:i,postMeteringOptions:t},ssr:!1,skip:l||!!r})}({params:e}),c=s.error?[]:null===(n=s.data)||void 0===n?void 0:n.meterPost.postIds,m=!(null==c||!c.includes(d)),u=(0,b.a)(),p=u.loading,k=u.shouldShowIncognitoRegwall,v=(0,o.a)(to,{variables:{postId:d,postMeteringOptions:{forceTruncation:!1}},ssr:!1,fetchPolicy:"cache-only"}),S="Post"===(null===(t=v.data)||void 0===t||null===(i=t.postResult)||void 0===i?void 0:i.__typename)&&v.data.postResult.content.isLockedPreviewOnly,h=!p&&k&&m&&!S,N=(0,o.a)(to,{variables:{postId:d,postMeteringOptions:{forceTruncation:h}},skip:!d}),y=null===(a=N.data)||void 0===a?void 0:a.postResult,E="Post"===(null==y?void 0:y.__typename)&&!(null==y||null===(l=y.content)||void 0===l||!l.isLockedPreviewOnly),x=_(d,E),F=x.content,w=y&&F?so(so({},y),{},{content:F}):y;return r.useMemo((function(){return{loading:N.loading||s.loading||!!x.loading,postQueryResult:N,postResult:w,postMeterQueryResult:s}}),[N,s,w,x])},mo=r.memo((function(e){var n=e.postQueryResult,t=e.postResult,i=e.postMeterQueryResult,a=e.params,o=(0,R.mr)({params:a})||"",m=n.loading,u=n.error,p=i.error,k=i.data,v=null==k?void 0:k.meterPost,g=(0,l.TH)(),f=r.useMemo((function(){return{name:"post_page",postId:o}}),[o]);return o?m?r.createElement(O.P,{size:"inset"},r.createElement(oo,null)):p||u?r.createElement(T.C,{error:p||u}):(0,c.r)(t)?r.createElement(c.I,{postResult:t}):r.createElement(x,{post:t,matchedPath:g.pathname,key:o},r.createElement(C.cW,{source:f},t.creator&&r.createElement(s.$,{user:t.creator}),r.createElement(ha,{post:t,meteringInfo:v}))):r.createElement(d.$,null)}))},32931:(e,n,t)=>{"use strict";t.d(n,{j:()=>I});var i=t(63038),a=t.n(i),o=t(67154),r=t.n(o),l=t(6479),d=t.n(l),s=t(18446),c=t.n(s),m=t(67294),u=t(18733),p=t(77355),k=t(21755),v=t(31889),g=t(14646),f=t(77241),S=t(17583),h=t(6280),N=function(e){return{position:"sticky",opacity:e?1:0,visibility:e?"visibile":"hidden",display:"flex",justifyContent:"center",transition:"opacity 300ms",zIndex:f.ZP.selectionMenu}},y={bottom:"16px"},E=function(e,n){return function(t){return{bottom:e?"0":"16px","> div":{transform:"translateY(".concat(n,"px)"),borderTop:e?"solid 1px ".concat(t.baseColor.background.normal):void 0}}}},x=function(e){var n=e.margin,t=void 0===n?"0 16px":n;return m.createElement(p.x,{margin:t,height:"12px",borderRight:"BASE_LIGHTER"})},b=function(e){var n=e.isSingleColumn,t=d()(e,["isSingleColumn"]);return m.createElement(p.x,r()({display:"flex",flexBasis:n?"0":void 0,flexGrow:n?"1":void 0,flexShrink:n?"1":void 0,justifyContent:n?"center":void 0,alignItems:"center"},t))},F=(0,m.memo)((function(e){var n=e.multiVoteButton,t=e.responsesButton,i=e.saveButton,a=e.allowResponses,o=e.isSingleColumn,r=a||o,l=(0,v.F)(),d=(0,u.Uo)().baseTheme,s=(0,m.useMemo)((function(){return l.backgroundColor!==d.backgroundColor||!c()(l.baseColor.background,d.baseColor.background)}),[l,d]);return m.createElement(p.x,{width:o?"100%":void 0,justifyContent:o?"stretch":void 0,display:"flex",backgroundColor:"BACKGROUND",alignItems:"center",borderRadius:o?"0":"20px",border:s&&!o?"BASE_LIGHTER":"NONE",padding:o?"0":"0 14px 0 16px",height:o?"48px":"40px",boxShadow:o?void 0:"0px 2px 10px 0px rgba(0, 0, 0, 0.1)"},m.createElement(b,{isSingleColumn:o},n),r&&m.createElement(b,{isSingleColumn:o},!o&&m.createElement(x,null),t),i&&m.createElement(m.Fragment,null,!o&&m.createElement(x,{margin:"0 12px 0 16px"}),m.createElement(b,{isSingleColumn:o},i)))})),w=function(e){var n=e.children,t=(0,g.I)(),i=(0,h.$)(!0),a=i.dockRef,o=i.markerRef,r=i.isStuck;return m.createElement(m.Fragment,null,m.createElement("div",{ref:o}),m.createElement("div",{ref:a,className:t([N(r),y])},n))},P=function(e){var n=e.children,t=e.isSingleColumn,i=(0,g.I)(),o=(0,m.useRef)(),r=(0,m.useState)(0),l=a()(r,2),d=l[0],s=l[1],c=(0,m.useCallback)((function(e){s((function(n){return Math.max(Math.min(n+e,56),0)}))}),[s]),u=(0,m.useCallback)((function(){var e,n=null===(e=v.current)||void 0===e?void 0:e.getBoundingClientRect().y;window.scrollY>0&&o.current&&n&&c(o.current-n),o.current=n}),[c]),p=(0,h.$)(!0,u),k=p.dockRef,v=p.markerRef,f=p.isStuck;return m.createElement(m.Fragment,null,m.createElement("div",{ref:v}),m.createElement("div",{ref:k,className:i([N(f),E(t,d)])},n))},I=function(e){var n=e.isSingleColumn,t=(0,S.s)(),i=(0,m.useMemo)((function(){return!(n||t&&t!==k.j.xl)}),[t,n]),a=(0,m.useMemo)((function(){return n?t===k.j.xs||t===k.j.sm:t!==k.j.xl}),[t,n]);return i?m.createElement(w,null,m.createElement(F,e)):a?m.createElement(P,{isSingleColumn:!!n},m.createElement(F,r()({isSingleColumn:n},e))):null}},6280:(e,n,t)=>{"use strict";t.d(n,{$:()=>l});var i=t(63038),a=t.n(i),o=t(67294),r=t(34135),l=function(e,n){var t=(0,o.useRef)(null),i=(0,o.useRef)(null),l=(0,o.useState)(!0),d=a()(l,2),s=d[0],c=d[1];return(0,o.useEffect)((function(){var a=function(){var e,a,o=null===(e=t.current)||void 0===e?void 0:e.getBoundingClientRect().y,r=null===(a=i.current)||void 0===a?void 0:a.getBoundingClientRect().y;o&&r&&c(Boolean(r-o)),null==n||n()};if(a(),e)return r.V6.on("scroll",a),function(){r.V6.off("scroll",a)}}),[e]),{isStuck:e&&s,dockRef:t,markerRef:i}}},60672:(e,n,t)=>{"use strict";t.d(n,{e:()=>u});var i=t(67294),a=t(27517),o=t(18702),r=t(25550),l=t(6443),d=t(98067),s=t(77280),c=t(43487),m=t(55765),u=function(e){var n=e.data,t=void 0===n?{}:n,u=e.isBlocked,p=void 0!==u&&u,k=e.loading,v=e.show,g=t.canonicalUrl,f=t.collectionViewerEdge,S=t.creatorViewerEdge,h=t.meteringInfo,N=t.pageType,y=t.post,E=t.profileName,x=t.profilePhoto,b=t.profileUsername,F=t.topicViewerEdge,w=(0,a.I0)(),P=(0,r.r)(),I=P.loading,_=P.viewerId,O=(0,m.P)(),C=O.loading,T=O.inAppBrowser,R=(0,l.H)(),D=R.loading,A=R.value,M=(0,c.v9)((function(e){return e.navigation.referrer})),B=(0,s.PM)();(0,i.useEffect)((function(){if(!(k||D||I||!_||C)){var e=(0,o.RD)({collectionViewerEdge:f,creatorViewerEdge:S,currentUserId:_,inAppBrowser:T,meteringInfo:h,page_type:N,post:y,profile_name:E,profile_photo:x,profile_username:b,referrer:M,referrerSource:B,viewer:A,topicViewerEdge:F});return g&&(e.data.$canonical_url=g),(0,o.Pu)(e),w((0,d.aj)(e)),v&&(w((0,d.QZ)()),w((0,d.Dl)(p))),function(){w((0,d.Uo)())}}}),[k,D,I,_,C])}},24176:(e,n,t)=>{"use strict";t.d(n,{G:()=>i});var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"MastodonVerificationLink_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"linkedAccounts"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mastodon"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"username"}}]}}]}}]}}]}},90732:(e,n,t)=>{"use strict";t.d(n,{$:()=>r});var i=t(67294),a=t(77355),o=t(50458),r=function(e){var n,t,r=e.user,l=(0,o.eF)(),d=null===(n=r.linkedAccounts)||void 0===n||null===(t=n.mastodon)||void 0===t?void 0:t.username;return d?i.createElement(a.x,{display:"none"},i.createElement("a",{rel:"me",href:"".concat(l,"/@").concat(d)},"Mastodon")):null}},3934:(e,n,t)=>{"use strict";t.d(n,{d:()=>c});var i=t(319),a=t.n(i),o=t(8607),r=t(14524),l=t(63009),d={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"GridPostPreviewContent_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"previewImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"GridPostPreviewImage_imageMetadata"}}]}},{kind:"Field",name:{kind:"Name",value:"extendedPreviewContent"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"subtitle"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostPreviewFooter_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostPreviewByLine_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostPreviewInformation_post"}}]}}].concat(a()([{kind:"FragmentDefinition",name:{kind:"Name",value:"GridPostPreviewImage_imageMetadata"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ImageMetadata"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"focusPercentX"}},{kind:"Field",name:{kind:"Name",value:"focusPercentY"}},{kind:"Field",name:{kind:"Name",value:"alt"}}]}}]),a()(o.m1.definitions),a()(r.xO.definitions),a()(l.u.definitions))},s=t(3105),c={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"GridPostPreview_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"GridPostPreviewContent_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostPreviewContainer_post"}}]}}].concat(a()(d.definitions),a()(s.J.definitions))}},82053:(e,n,t)=>{"use strict";t.d(n,{w:()=>B});var i=t(67294),a=t(66604),o=t.n(a),r=t(77355),l=t(93310),d=t(52069),s=t(90586),c=t(87691),m=t(14646),u=t(97480),p=t(18634),k=t(21755),v=t(31889);function g(e){var n=e.dividerBreakpoints,t=e.dividerColor,a=(0,v.F)();return i.createElement(p.y,{xl:n.includes(k.j.xl),lg:n.includes(k.j.lg),md:n.includes(k.j.md),sm:n.includes(k.j.sm),xs:n.includes(k.j.xs)},i.createElement(u.E,{marginTop:"32px",borderColor:null!=t?t:a.colorTokens.border.neutral.tertiary.base}))}var f=t(94124),S=t(4381),h=t(46696),N=t(36001);function y(e,n){return e.includes(n)?"block":"none"}function E(e){return e?Math.round(e):e}function x(e){var n=e.image,t=e.postUrl,a=e.scales,o=e.aspectRatio,d=void 0===o?S.Pr.ThreeToTwo:o,s=e.miroImgFetchedWidth,c=(0,N.Il)(a),m=(null==n?void 0:n.id)||"1*yuVzMhCJyDENbyhwAsrkwA.png",u=(0,h.W6)({miroId:m,width:s,strategy:h._S.Resample,freezeGifs:!1}),p=(null==n?void 0:n.alt)||"",k=function(e,n,t){return function(i){var a,o,r=null!==(a=E(n))&&void 0!==a?a:50,l=null!==(o=E(t))&&void 0!==o?o:50;return{width:"100%",borderRadius:"2px",aspectRatio:"string"==typeof e?S.FA[e]:{xs:S.FA[e.xs],sm:S.FA[e.sm],md:S.FA[e.md],lg:S.FA[e.lg],xl:S.FA[e.xl]},objectFit:"cover",objectPosition:"".concat(r,"% ").concat(l,"%"),backgroundColor:i.colorTokens.background.neutral.tertiary.base}}}(d,null==n?void 0:n.focusPercentX,null==n?void 0:n.focusPercentY);return i.createElement(l.r,{href:t,"aria-label":"Post Preview Image"},Object.keys(c).map((function(e){var n=c[e];return n.length?i.createElement(r.x,{display:{xs:y(n,"xs"),sm:y(n,"sm"),md:y(n,"md"),lg:y(n,"lg"),xl:y(n,"xl")},key:"grid-image-".concat(e)},i.createElement(f.E,{src:u,alt:p,rules:k,loading:f.K.LAZY})):null})))}var b=t(9842),F=t(55047),w=t(63254),P="image",I="content";function _(e){return new Array(12).fill(null).map(e).join(" ")}function O(e){switch(e){case"L":return'"'.concat(_((function(e,n){return n>=7?I:P})),'"');case"M":case"S":var n=_((function(){return P})),t=_((function(){return I}));return'"'.concat(n,'" "').concat(t,'"')}}var C={S:{subElementSpacing:"16px",titleScale:"S",titleClamp:2,gridTemplateAreas:O("S"),gap:"24px 0",hasDivider:!0,flexGrowTitle:"1"},M:{subElementSpacing:"20px",titleScale:"M",titleClamp:2,gridTemplateAreas:O("M"),gap:"32px 0",hasDivider:!0,flexGrowTitle:"1"},L:{subElementSpacing:"24px",titleScale:"L",titleClamp:3,gridTemplateAreas:O("L"),gap:"0 56px",hasDivider:!1,flexGrowTitle:void 0}},T=function(e,n){return{height:"100%",display:"grid",gridTemplateColumns:"repeat(12, 1fr)",gridTemplateRows:"auto 1fr",gap:e,gridTemplateAreas:n}},R=function(e){return{gridArea:e}},D={display:"flex",justifyContent:"center",flexDirection:"column"},A=function(e){var n,t=e.post,a=e.postUrl,u=e.scales,p=e.aspectRatio,k=e.showCollectionName,v=e.showAuthor,f=e.showDivider,S=e.dividerBreakpoints,h=e.dividerColor,y=e.miroImgFetchedWidth,E=(0,m.I)(),_=t.title,O=null==t||null===(n=t.extendedPreviewContent)||void 0===n?void 0:n.subtitle,A=(0,N.L)(C,u),M=o()(A,(function(e){return e.subElementSpacing})),B=o()(A,(function(e){return e.titleScale})),L=o()(A,(function(e){return e.titleClamp})),j=o()(A,(function(e){return e.gap})),V=o()(A,(function(e){return e.gridTemplateAreas})),U=o()(A,(function(e){return e.hasDivider})),W=o()(A,(function(e){return e.flexGrowTitle})),G=_&&_.length>70,H=f&&U;return i.createElement("div",{className:E(T(j,V))},i.createElement("div",{className:E(R(P))},i.createElement(x,{image:t.previewImage,postUrl:a,scales:u,aspectRatio:p,miroImgFetchedWidth:y})),i.createElement("div",{className:E([R(I),D])},i.createElement(b.G,{post:t,marginBottom:M,showCollectionName:k,showAuthor:v}),i.createElement(r.x,{wordBreak:"break-word",paddingBottom:_||O?M:void 0,flexGrow:W},i.createElement(l.r,{href:a,"aria-label":"Post Preview Title"},_&&i.createElement("div",{title:G?_:""},i.createElement(d.Dx,{scale:B,clamp:L},_)),O&&i.createElement(r.x,{paddingTop:"8px"},i.createElement(s.QE,{scale:"S",clamp:2},O)))),i.createElement(l.r,{href:a,"aria-label":"Post Preview memebership and reading time information"},i.createElement(c.F,{scale:"S",tag:"span"},i.createElement(r.x,{display:"flex",alignItems:"center"},i.createElement(w.O,{post:t})))),i.createElement(r.x,{paddingTop:M},i.createElement(F.u,{post:t,postUrl:a,scales:u})),H&&i.createElement(g,{dividerBreakpoints:S,dividerColor:h})))},M=t(69935);function B(e){var n=e.post,t=e.index,a=e.lastIndex,o=e.presentationTrackerReferrerSource,r=e.scale,l=e.aspectRatio,d=e.showCollectionName,s=e.showAuthor,c=e.dividerBreakpoints,m=e.dividerColor,u=e.miroImgFetchedWidth,p="string"==typeof r?(0,N.n0)(r):r;return i.createElement(M.V,{post:n,presentationTrackerReferrerSource:o,index:t,isFullHeight:!0},(function(e){var o=e.postUrl;return i.createElement(A,{post:n,postUrl:o,scales:p,aspectRatio:l,showDivider:t!==a,showCollectionName:d,showAuthor:s,dividerBreakpoints:c,dividerColor:m,miroImgFetchedWidth:u})}))}},1279:(e,n,t)=>{"use strict";t.d(n,{m:()=>i});var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PublisherDescription_publisher"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Publisher"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"description"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"bio"}}]}}]}}]}},937:(e,n,t)=>{"use strict";t.d(n,{y:()=>l});var i=t(67294),a=t(14294),o=t(38882),r=t(87691),l=function(e){var n=e.publisher,t=e.color,l="Collection"===n.__typename?n.description:n.bio;return l?i.createElement(r.F,{scale:"M",color:t},i.createElement(o.c.Provider,{value:!0},i.createElement(a.P,{wrapLinks:!0},l))):null}},74419:(e,n,t)=>{"use strict";t.d(n,{i:()=>r});var i=t(67294),a=t(20113),o=t(14646),r=function(e){var n=e.publisher,t=e.scale,r=void 0===t?"XS":t,l=e.prefix,d=(0,o.I)();return n.name?i.createElement(a.X6,{playwrightClassName:"pw-author-name",scale:r},i.createElement("span",{className:d({wordBreak:"break-word"})},l,n.name)):null}},80350:(e,n,t)=>{"use strict";t.d(n,{t:()=>s,e:()=>c});var i=t(67294),a=t(68427),o=t(84739),r=t(93310),l=t(87691),d=t(21372),s=function(e){var n,t,i=null!==(n="Collection"===e.__typename?e.subscriberCount:null===(t=e.socialStats)||void 0===t?void 0:t.followerCount)&&void 0!==n?n:0;return{followerCount:i,isFollowerCountVisible:i>0}},c=function(e){var n=e.disableLink,t=void 0!==n&&n,c=e.scale,m=void 0===c?"L":c,u=e.publisher,p=e.color,k=e.linkStyle,v=void 0===k?"SUBTLE":k,g=e.inline,f=e.showWhenZero,S=(0,a.B)(),h=(0,o.I)(),N=s(u),y=N.followerCount,E=N.isFollowerCountVisible;if(!f&&!E)return null;var x="".concat((0,d.pY)(y)," Follower").concat(1===y?"":"s");return i.createElement(l.F,{playwrightClassName:"pw-follower-count",tag:"span",scale:m,color:p},y>0&&!t?i.createElement(r.r,{href:"".concat("Collection"===u.__typename?S(u):h(u),"/followers"),linkStyle:v,inline:g},x):x)}},22330:(e,n,t)=>{"use strict";t.d(n,{RD:()=>r,Ki:()=>l,lt:()=>d});var i=t(319),a=t.n(i),o=t(68216),r={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"OverlappingAvatars_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"avatar"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"domain"}},{kind:"Field",name:{kind:"Name",value:"slug"}}]}}]},l={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"OverlappingAvatars_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"imageId"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"username"}},{kind:"FragmentSpread",name:{kind:"Name",value:"userUrl_user"}}]}}].concat(a()(o.$m.definitions))},d={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"OverlappingAvatars_newsletterV3"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"NewsletterV3"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"avatarImageId"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"OverlappingAvatars_collection"}}]}},{kind:"Field",name:{kind:"Name",value:"user"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"OverlappingAvatars_user"}}]}}]}}].concat(a()(r.definitions),a()(l.definitions))}},20512:(e,n,t)=>{"use strict";t.d(n,{Y4:()=>l,NJ:()=>d,lc:()=>s});var i=t(59713),a=t.n(i),o=t(46696);function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function l(e){var n=e.miroId,t=e.originalWidth,i=e.originalHeight,a=e.focusPercentX,r=e.focusPercentY,l=e.croppedWidth;if(!n)return null;var d=(0,o.vz)({miroId:n,aspectRatio:16/9,croppedWidth:l,originalWidth:t,originalHeight:i,focusPercentX:a,focusPercentY:r}),s=(0,o.vz)({miroId:n,aspectRatio:4/3,croppedWidth:l,originalWidth:t,originalHeight:i,focusPercentX:a,focusPercentY:r}),c=(0,o.vz)({miroId:n,aspectRatio:1,croppedWidth:l,originalWidth:t,originalHeight:i,focusPercentX:a,focusPercentY:r}),m=new Set([d,s,c]);return Array.from(m)}function d(e){return function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){a()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({"@type":"ImageObject"},e)}function s(e){var n=e.id,t=e.originalWidth,i=e.originalHeight;if(!n||!t||!i)return null;var a=Math.min(i,60),r=a/i,l=Math.floor(t*r);return d({width:l,height:a,url:(0,o.W6)({miroId:n,width:l,freezeGifs:!0,strategy:o._S.Resample})})}},41135:(e,n,t)=>{"use strict";t.d(n,{b:()=>T});var i=t(59713),a=t.n(i),o=t(67294),r=t(33380),l=t(46484),d=t(319),s=t.n(d),c=t(38883),m=t(94124),u=t(96370),p=t(14646),k=t(97217),v=t(32342);function g(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function f(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?g(Object(t),!0).forEach((function(n){a()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):g(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var S={clear:"both"},h={clear:"both",width:"100%"},N=function(e){var n,t,i=e.layoutGroup,a=e.postBodyInserts,r=e.isEmbedded,l=(0,p.I)(),d=i.styleGroups[0].paragraphViewModels[0].richTextStyle,s=i.styleGroups.map((function(e,n){var t=n<3;return o.createElement(c.ZQ,{key:n,styleGroup:e,postBodyInserts:a,richTextStyle:d,loading:t?m.K.EAGER:m.K.LAZY})}));if((0,v.jH)(d)||r||"INLINE"===d)return o.createElement(o.Fragment,null,s);switch(i.effectiveLayout){case"OUTSET_CENTER":case"OUTSET_ROW":return o.createElement("div",{className:l(S)},o.createElement(u.P,{size:{xs:"full",sm:"full",md:"full",lg:"outset",xl:"outset"}},s));case"FULL_WIDTH":return o.createElement("div",{className:l(h)},s);default:return"FULL_PAGE"===d?o.createElement(u.P,{size:"app"},s):o.createElement("div",{className:l((n=i.effectiveLayout,t={boxSizing:"border-box",margin:"0 auto",width:"100%"},"INSET_CENTER"===n?f(f({},t),{},{maxWidth:"700px",padding:"0 1.25em"}):t))},s)}},y=o.memo(N),E=t(98096),x=t(31889),b=t(97489),F={":after":{display:"block",content:'""',clear:"both"}},w=t(46696),P=t(3207);function I(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function _(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?I(Object(t),!0).forEach((function(n){a()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):I(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var O=function(){return{display:"table-cell",paddingBottom:"32px",verticalAlign:"bottom"}};function C(e){var n,t,i,a,l=e.bgImage,d=e.children,s=e.isFullPage,c=e.paragraphName,m=(0,p.I)(),u=(0,x.F)();return l&&l.id&&s?o.createElement(r.TA,{name:c,type:"bgimage"},o.createElement("div",{className:m((n=l,t=n.id,i=n.originalWidth,a=n.originalHeight,function(){var e=[400,600,800,1e3,1200,1400,1600,1800,2e3],n={miroId:t,strategy:w._S.Resample,verticalGradient:{start:29,end:81,opacity:40}},o=e.reduce((function(t,o,r){var l=(0,w.W6)(_(_({},n),{},{width:o,height:o/i*a}));return r===e.length-1?(t.backgroundImage="url(".concat(l,")"),t):(t["@media (min-width: ".concat(o,"px)")]={backgroundImage:"url(".concat(l,")")},t)}),{});return _({backgroundColor:"rgba(0, 0, 0, 0.9)",backgroundPosition:"50% 50%",backgroundSize:"cover",display:"table",minHeight:"100vh",width:"100%"},o)}))},o.createElement("div",{className:m(O)},o.createElement(E.f,{theme:(0,P.GV)(u)},d)))):d}var T=function(e){var n=e.paragraphViewModels,t=e.postBodyInserts,i=e.section,r=o.useContext(l.M),d=(0,p.I)();if(0===n.length)return null;var m,u=function(e){var n=[],t=[];e.forEach((function(e){var i=function(e,n){switch(n){case k.ms.INSET_LEFT:case k.ms.OUTSET_LEFT:return"IMG"===e||"IFRAME"===e?k.ms.INSET_CENTER:n;case k.ms.OUTSET_ROW_CONTINUE:return k.ms.OUTSET_ROW;default:return n||k.ms.INSET_CENTER}}(e.paragraphStyle,e.paragraph.layout),a=n[n.length-1];if(a&&a.effectiveLayout===i)t.push(e);else{if(a){var o,r=(0,c.lD)(t);(o=a.styleGroups).push.apply(o,s()(r))}t.length=0,t.push(e),n.push({styleGroups:[],effectiveLayout:i})}}));var i=n[n.length-1];if(i){var a,o=(0,c.lD)(t);(a=i.styleGroups).push.apply(a,s()(o))}return n}(n),v=(m=n[0].richTextStyle,function(e){switch(m){case"SERIES":return{paddingTop:"32px",paddingBottom:"32px",margin:"auto 0",width:"100%"};case"STREAM":case"CARD":case"FULL_PAGE":case"INLINE":return{wordBreak:"break-word",wordWrap:"break-word"};case"SHORTFORM_CARD":return a()({wordBreak:"break-word",wordWrap:"break-word",position:"relative",overflow:"hidden",height:"340px"},b.md(e),{height:"218px"});default:return{}}});return o.createElement("div",{className:d([v,F])},o.createElement(C,{bgImage:i.backgroundImage,isFullPage:"FULL_PAGE"===n[0].richTextStyle,paragraphName:n[0].paragraph.name},u.map((function(e,n){return o.createElement(y,{key:n,layoutGroup:e,postBodyInserts:t,isEmbedded:r})}))))}},7834:(e,n,t)=>{"use strict";t.d(n,{b:()=>b});var i=t(67154),a=t.n(i),o=t(63038),r=t.n(o),l=t(38460),d=t(67294),s=t(38882),c=t(75119),m=t(86249),u=t(10374),p=t(90504),k=t(83363),v=t(59713),g=t.n(v),f=t(39202);function S(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function h(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?S(Object(t),!0).forEach((function(n){g()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):S(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function N(e,n,t){if(!e||"number"!=typeof n||"number"!=typeof t)return null;var i=n,a=t;return e.substr(i,a-i)}var y=t(6443),E=t(6402),x=t(36299),b=d.forwardRef((function(e,n){var t,i,o,v=e.isAuroraPostPageEnabled,g=e.post,S=e.inlinePost,b=e.postBodyInserts,F=e.richTextStyle,w=e.markedUpBodyModel,P=e.shouldHideHighlightAnnotations,I=(0,y.H)().value,_=S&&!g?w||(null==S||null===(t=S.extendedPreviewContent)||void 0===t?void 0:t.bodyModel):null==g||null===(i=g.content)||void 0===i?void 0:i.bodyModel,O={creator:null==g?void 0:g.creator,isAuroraPostPageEnabled:v,postBodyInserts:b,ref:n,richTextStyle:F||"FULL_PAGE",postId:(null==g?void 0:g.id)||""},C=g&&g.creator&&g.creator.allowNotes||!1,T=(0,l.t)(x.J8,{ssr:!1,variables:{postId:(null==g?void 0:g.id)||"",showNotes:C},notifyOnNetworkStatusChange:!0}),R=r()(T,2),D=R[0],A=R[1],M=A.called,B=A.data,L=null==B?void 0:B.post;if(d.useEffect((function(){g&&!M&&D()}),[g]),!_)return E.k.error("Expected post to have content or preview content."),null;var j=(null==g||null===(o=g.content)||void 0===o?void 0:o.bodyModel)&&(null==g?void 0:g.content.bodyModel.paragraphs)||[],V=function(e,n){return e&&n?e.map((function(e){var t=e.endOffset,i=e.startOffset,a=e.paragraphs&&e.paragraphs[0],o=function(e,n){return e?n.find((function(n){var t=n.name;return e===t})):null}(a.name,n);if(!a||!o)return null;var r=N(a.text,i,t),l=N(o.text,i,t);if(!r||!l)return null;if(r===l)return e;var d=o.text?o.text.indexOf(r):null;if("number"!=typeof d||d<0)return null;var s=d+r.length;return h(h({},e),{},{endOffset:s,startOffset:d})})).filter(f.b):e}(L&&L.highlights||[],j),U=L&&L.privateNotes||null;return d.createElement(u.yb,null,d.createElement(c.KN,null,d.createElement(m.M,{interactivePost:g,highlights:V,disableSelection:!g},d.createElement(k.U,{highlights:V,paragraphs:j,viewer:I},d.createElement(s.c.Provider,{value:!0},d.createElement(p.y,a()({},O,{bodyModel:_,highlights:V,privateNotes:U,shouldHideHighlightAnnotations:P})))))))}))},90504:(e,n,t)=>{"use strict";t.d(n,{y:()=>ie});var i=t(67154),a=t.n(i),o=t(319),r=t.n(o),l=t(67294),d=t(33380),s=t(14646),c={display:"flex",justifyContent:"center",marginTop:"32px",marginBottom:"14px",paddingTop:"24px",paddingBottom:"10px"},m=function(e){return{backgroundColor:e.baseColor.text.darker,borderRadius:"50%",display:"inline-block",height:"3px",width:"3px"}},u={marginRight:"20px"};function p(){var e=(0,s.I)();return l.createElement("div",{className:e(c),role:"separator"},l.createElement("span",{className:e([m,u])}),l.createElement("span",{className:e([m,u])}),l.createElement("span",{className:e(m)}))}var k=t(41135),v=t(63038),g=t.n(v),f=t(50008),S=t.n(f),h=t(23450),N=t.n(h),y=t(28655),E=t.n(y),x=t(92471),b=t(17193),F=t(27048),w=t(77355),P=t(8431),I=t(31889),_=t(34135);function O(){var e=E()(["\n  fragment PostNotesDetails_user on User {\n    id\n    imageId\n    name\n    username\n    ...UserAvatar_user\n  }\n  ","\n"]);return O=function(){return e},e}function C(e){var n=e.grid.xStep;return{padding:"".concat(3*n,"px ").concat(4*n,"px ").concat(3*n,"px"),width:"400px"}}function T(e){var n=e.close,t=e.users,i=(0,s.I)(),a=l.useRef(null),o=(0,I.F)(),r=o.grid.xStep;return l.useEffect((function(){function e(){var e=a.current;if(e&&e.getBoundingClientRect){var t=e.getBoundingClientRect(),i=t.bottom,r=t.top<0||i>window.innerHeight,l=window.innerWidth<o.breakpoints.xl;(r||l)&&n()}}return _.V6.on("scroll_end",e),_.V6.on("resize_throttled",e),function(){_.V6.off("scroll_end",e),_.V6.off("resize_throttled",e)}}),[]),l.createElement("section",{ref:a,className:i(C)},l.createElement(w.x,{borderBottom:"BASE_LIGHTER",marginBottom:"-".concat(r,"px"),paddingBottom:"".concat(2*r,"px")},l.createElement(P.Lh,null,"Highlights (".concat(t.length,")"))),l.createElement(w.x,{marginLeft:"3px"},t.length&&t.map((function(e){return l.createElement(w.x,{display:"inline-block",key:e.id,marginTop:"".concat(5*r,"px"),marginRight:"".concat(5*r,"px"),width:"".concat(8*r,"px")},l.createElement(b.Yt,{hasPopover:!0,link:!0,user:e,scale:"XS"}))}))))}var R=l.memo(T),D=((0,x.Ps)(O(),F.W),t(83363)),A=t(69217),M=t(60748),B=t(25267),L=t(75880),j=t(66227),V=t(87691),U=t(29746),W=t(39202);function G(){return{border:"none",cursor:"pointer",display:"block",padding:"0px",textAlign:"left",width:"100%"}}function H(){return{left:"100%",position:"absolute",top:0}}function z(e,n){return{marginTop:"6px",maxWidth:"100%",position:"absolute",top:"".concat(e-(n||0),"px"),whiteSpace:"nowrap",width:"100%"}}function Y(e){return{marginLeft:"auto",marginRight:"auto",maxWidth:"".concat((0,U.G)(e,8,!0),"px"),position:"relative"}}function Z(){return{display:"inline-block",maxWidth:"100%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}function $(e,n){return"number"==typeof e.startOffset&&"number"==typeof n.startOffset?e.startOffset<n.startOffset?-1:1:-1}function q(e,n){var t=n.startOffset,i=n.endOffset,a=n.paragraphs[0].name;if(!a||"number"!=typeof t||"number"!=typeof i)return e;var o=!1,r=e[a]||[];return r.length&&(r=r.map((function(e){var a=t<=e.endOffset+1,r=e.startOffset,l=e.endOffset;return a&&(o=!0,e.highlights.push(n),l=Math.max(i,e.endOffset),r=Math.min(t,e.startOffset)),{highlights:e.highlights,endOffset:l,startOffset:r}}))),o||r.push({highlights:[n],endOffset:i,startOffset:t}),e[a]=r,e}function Q(e){var n=e.children,t=e.highlightString,i=e.toggle,a=(0,s.I)();return"Top highlight"===t?l.createElement(l.Fragment,null,n):l.createElement("button",{className:a(G),onClick:function(){return i()},onMouseDown:function(e){return e.preventDefault()}},n)}function X(e){var n=e.creator,t=e.positionMap,i=e.yPosOffset,a=e.viewerEdge,o=(0,s.I)();if("number"!=typeof i)return null;var r=Array.from(t.entries());return l.createElement(B.I,{nonBlocking:!0},(function(e){return l.createElement(l.Fragment,null,r.map((function(t,r){var d=g()(t,2),s=d[0],c=d[1],m=function(e,n,t,i){var a=null==i?void 0:i.isFollowing;if(1===e.length){if("anon"===e[0].userId)return"Top highlight";if(!n)return null;if(t&&t.id===e[0].userId&&n.id!==t.id&&!a)return null;if(n&&n.id===e[0].userId)return"You highlighted";if(e[0].user&&e[0].user.name)return e[0].user.name}var o=[];if(e.forEach((function(e){if(e.user){var i=n&&n.id===e.userId,r=e.user.name,l=t&&t.id===e.userId&&(!n||n.id!==t.id&&!a);i?o.length&&"You"===o[0]||o.unshift("You"):l||!r||o.includes(r)||o.push(r)}})),!o.length)return"Top highlight";if(1===o.length)return"You"===o[0]?"You highlighted":o[0];if(2===o.length)return"".concat(o[0]," and ").concat(o[1]);var r=o.slice(0,2),l=o.length-r.length;return"".concat(r[0],", ").concat(r[1],", and ").concat(l," ").concat(N()("other",l))}(c,e,n,a);return m?l.createElement("div",{className:o(z(s,i)),key:r},l.createElement(j.B,null,(function(e){var n=e.isVisible,t=e.hide,i=e.toggle;return l.createElement(l.Fragment,null,l.createElement(Q,{toggle:i,highlightString:m},l.createElement(V.F,{scale:"S"},l.createElement("span",{className:o(Z)},m))),n&&l.createElement(A.G,{boundariesElement:"document",isVisible:!0,hide:t,placement:"right",popoverRenderFn:function(){var e=new Set,n=c.map((function(n){var t=n.user;return t&&t.id&&!e.has(t.id)?(e.add(t.id),t):null})).filter(W.b);return l.createElement(R,{close:t,users:n})}},l.createElement(l.Fragment,null)))}))):null})))}))}var K=l.forwardRef((function(e,n){var t=e.creator,i=e.highlights,a=l.useContext(D.V).highlightSegments,o=l.useRef(null),d=l.useState(null),c=g()(d,2),m=c[0],u=c[1],p=(0,s.I)(),k=(0,I.F)(),v=l.useState(null),f=g()(v,2),h=f[0],N=f[1],y=l.useState(null),E=g()(y,2),x=E[0],b=E[1],F=(0,L.Pd)(t).viewerEdge;return l.useEffect((function(){var e=function(){var e=function(e,n,t){var i=new Map;if(e.size&&n.length){var a=function(e){var n=r()(e).sort($).reduce(q,{});return Object.values(n).reduce((function(e,n){return n&&"object"===S()(n)&&n.length?(e.push.apply(e,r()(n)),e):e}),[])}(n),o=[];a.forEach((function(n){var a=n.highlights[0],r=a.paragraphs[0].name;if(a&&"number"==typeof a.startOffset&&r){var l=e.get("".concat(r,"_").concat(a.startOffset));if(l&&l.ref&&l.ref.current){var d,s=l.ref.current.getBoundingClientRect().top+window.pageYOffset;o.length&&(d=o.find((function(e){return s<e+t.newFonts.body.lineHeight.M&&s>e||s>e-t.newFonts.body.lineHeight.M&&s<e})));var c=d||s,m=i.get(c)||[];m.length||o.push(c);var u=m.concat(n.highlights);u.length&&i.set(c,u)}}}))}return i}(a,i,k);if(u(e),"function"!=typeof n&&null!=n&&n.current&&b(n.current.offsetTop),null!=o&&o.current){var t=o.current.getBoundingClientRect().left,l=window.innerWidth-t-8*k.grid.xStep;N(l)}};_.V6.on("resize_throttled",e);var t=(0,M.x)((function(n){"iframe.resize"!==n.context&&"player.js"!==n.context||e()})).destructor;return e(),function(){_.V6.off("resize_throttled",e),t()}}),[i,a]),l.createElement("div",{className:p(Y)},l.createElement(w.x,{display:"block",xs:{display:"none"},sm:{display:"none"},md:{display:"none"},lg:{display:"none"},speechifyIgnore:!0},l.createElement("aside",{className:p(H),ref:o,style:{width:h?"".concat(h,"px"):void 0}},m&&l.createElement(X,{creator:t,highlights:i,positionMap:m,yPosOffset:x,width:h,viewerEdge:F}))))})),J=l.memo(K),ee=t(75119);function ne(e,n){var t;return Object.keys(e).some((function(i){return!!e[i].find((function(e){return e.insertType===n}))&&(t=i,!0)})),t}var te=t(32342),ie=l.forwardRef((function(e,n){var t,i,o=e.bodyModel,c=e.creator,m=e.highlights,u=e.isAuroraPostPageEnabled,v=e.privateNotes,g=e.postBodyInserts,f=e.richTextStyle,S=void 0===f?"FULL_PAGE":f,h=e.shouldHideHighlightAnnotations,N=void 0!==h&&h,y=(0,s.I)(),E=l.createRef(),x=null===(t=l.useContext(d.u6).watchedBounds.get("byline"))||void 0===t||null===(i=t.ref)||void 0===i?void 0:i.current,b=x?x.offsetTop-48:100,F={position:"absolute",left:0,top:"calc(100vh + ".concat(b,"px)"),bottom:"calc(100vh + ".concat(100,"px)"),width:"10px",pointerEvents:"none"},w=(0,ee.Zx)().privateNoteSelection,P=l.useMemo((function(){return m&&w?[].concat(r()(m),[w]):m}),[m,w]),I=g?function(e){return ne(e,"BYLINE")}(g):void 0,_=g?function(e){return ne(e,"METER")}(g):void 0,O=l.useMemo((function(){return(0,te.fj)(o,{bylineParagraphName:I,meterParagraphName:_,highlights:P,isAuroraPostPageEnabled:u,isPostPage:!0,privateNotes:v,richTextStyle:S})}),[o,P,v,S]),C=g&&g.first;return l.createElement("section",{ref:n},l.createElement("div",{ref:E},l.createElement(l.Fragment,null,l.createElement(d.TA,{name:"ghost-track",type:"ghost",className:y(F)}),"FULL_PAGE"===S&&m&&m.length>0&&!N&&l.createElement(J,{creator:c,highlights:r()(m),ref:n}),!!C&&C.map((function(e,n){return e.component?l.createElement("div",{key:"postBodyInsertFirst_".concat(n)},e.component):null}))),O.map((function(e,n){if("HR"===e){var t,i,o=O[n-1],r=O[n+1],d="HR"!==o&&(null==o||null===(t=o.section)||void 0===t?void 0:t.backgroundImage),s="HR"!==r&&(null==r||null===(i=r.section)||void 0===i?void 0:i.backgroundImage);return d||s?null:l.createElement(p,{key:n})}return l.createElement(k.b,a()({key:e.section.name||n,postBodyInserts:g},e))}))))}))},12182:(e,n,t)=>{"use strict";t.d(n,{fu:()=>E,e9:()=>N});var i=t(319),a=t.n(i),o=t(18821),r=t(66081),l={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ReportUserMenuItem_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"SusiClickable_post"}}]}}].concat(a()(r.qU.definitions))},d={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ResponsePopoverMenu_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"ReportUserMenuItem_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"HideResponseMenuItem_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"BlockUserMenuItem_post"}}]}}].concat(a()(l.definitions),a()([{kind:"FragmentDefinition",name:{kind:"Name",value:"HideResponseMenuItem_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isEditor"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}}]),a()([{kind:"FragmentDefinition",name:{kind:"Name",value:"BlockUserMenuItem_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}}]))},s={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ResponsePopoverMenu_catalog"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Catalog"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"ReportUserMenuItem_catalog"}},{kind:"FragmentSpread",name:{kind:"Name",value:"HideResponseMenuItem_catalog"}},{kind:"FragmentSpread",name:{kind:"Name",value:"BlockUserMenuItem_catalog"}}]}}].concat(a()([{kind:"FragmentDefinition",name:{kind:"Name",value:"ReportUserMenuItem_catalog"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Catalog"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}}]}}]),a()([{kind:"FragmentDefinition",name:{kind:"Name",value:"HideResponseMenuItem_catalog"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Catalog"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}}]),a()([{kind:"FragmentDefinition",name:{kind:"Name",value:"BlockUserMenuItem_catalog"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Catalog"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}}]))},c={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ResponseHeader_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"useIsVerifiedBookAuthor_user"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"ResponsePopoverMenu_post"}}]}}].concat(a()(o.H.definitions),a()(d.definitions))},m={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ResponseHeader_catalog"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Catalog"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"useIsVerifiedBookAuthor_user"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"ResponsePopoverMenu_catalog"}}]}}].concat(a()(o.H.definitions),a()(s.definitions))},u={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"SimpleResponse_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"ResponseHeader_post"}}]}}].concat(a()(c.definitions))},p={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"SimpleResponse_catalog"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Catalog"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"ResponseHeader_catalog"}}]}}].concat(a()(m.definitions))},k=t(13740),v={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ReadOrEditSimpleResponse_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"SimpleResponse_post"}}]}}].concat(a()(u.definitions))},g={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ReadOrEditSimpleResponse_catalog"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Catalog"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"username"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"SimpleResponse_catalog"}},{kind:"FragmentSpread",name:{kind:"Name",value:"getCatalogSlugId_Catalog"}}]}}].concat(a()(p.definitions),a()(k.g.definitions))},f={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"StoryResponse_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"ResponseHeader_post"}}]}}].concat(a()(c.definitions))},S={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"StoryResponse_catalog"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Catalog"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"ResponseHeader_catalog"}}]}}].concat(a()(m.definitions))},h={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ThreadedReply_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"ReadOrEditSimpleResponse_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"StoryResponse_post"}}]}}].concat(a()(v.definitions),a()(f.definitions))},N={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ThreadedReplies_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"ThreadedReply_post"}}]}}].concat(a()(h.definitions))},y={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ThreadedReply_catalog"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Catalog"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"ReadOrEditSimpleResponse_catalog"}},{kind:"FragmentSpread",name:{kind:"Name",value:"StoryResponse_catalog"}}]}}].concat(a()(g.definitions),a()(S.definitions))},E={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ThreadedReplies_catalog"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Catalog"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"ThreadedReply_catalog"}}]}}].concat(a()(y.definitions))}},98482:(e,n,t)=>{"use strict";t.d(n,{k:()=>R});var i=t(63038),a=t.n(i),o=t(67294),r=t(6722),l=t(43242),d=t(80745),s=t(28655),c=t.n(s),m=t(87757),u=t.n(m),p=t(6479),k=t.n(p),v=t(48926),g=t.n(v),f=t(38460),S=t(92471),h=t(68356),N=t.n(h),y=t(35469);function E(){var e=c()(["\n  fragment ThreadedResponsesSidebarContent_post on Post {\n    id\n    postResponses {\n      count\n    }\n    collection {\n      id\n      viewerEdge {\n        id\n        isEditor\n      }\n    }\n    creator {\n      id\n    }\n    ...ThreadedReplies_post\n  }\n  ","\n"]);return E=function(){return e},e}var x=(0,S.Ps)(E(),y.e),b=t(76412),F=t(18733),w=t(66411),P=t(50742),I=t(97217),_=t(86742);function O(){var e=c()(["\n  fragment ThreadedResponsesSidebar_post on Post {\n    id\n    ...ThreadedResponsesSidebarContent_post\n  }\n  ","\n"]);return O=function(){return e},e}var C=N()({loading:function(){return null},loader:function(){return Promise.all([t.e(7084),t.e(8883),t.e(6318),t.e(8121),t.e(8720),t.e(8913)]).then(t.bind(t,41469))},modules:["./ThreadedResponsesSidebarContent"],webpack:function(){return[41469]},render:(0,P.n)("ThreadedResponsesSidebarContent")}),T=function(e){var n,t,i,r,l,s,c,m,p,v=e.isResponsesSidebarVisible,S=e.inResponseToQuote,h=e.setInResponseToQuote,N=e.parentPost,y=e.continueThisThreadPost,E=e.continueThisThreadPostDepth,x=e.showPreviousSidebar,P=e.cleanupSidebar,O=e.initialSidebarRender,T=e.responsesSort,R=T?I.sV[T]:void 0,D=o.useState(R||I.sV.TOP),A=a()(D,2),M=A[0],B=A[1],L=o.useState(!1),j=a()(L,2),V=j[0],U=j[1],W=o.useRef(null),G=(0,f.t)(_.A,{variables:{postId:N.id,postResponsesPaging:{limit:d.p4},sortType:M},ssr:!1}),H=a()(G,2),z=H[0],Y=H[1],Z=Y.called,$=Y.loading,q=Y.data,Q=Y.fetchMore;Z||y||!v||(z(),C.preload());var X=null==q||null===(n=q.post)||void 0===n?void 0:n.responsesLocked,K=null==q||null===(t=q.post)||void 0===t?void 0:t.isLockedResponse,J=(0,d.aj)(v,O,null==q||null===(i=q.post)||void 0===i?void 0:i.threadedPostResponses,y),ee=J.responses,ne=J.showCreateReplyEditor,te=(null==q||null===(r=q.post)||void 0===r||null===(l=r.responseRootPost)||void 0===l||null===(s=l.post)||void 0===s?void 0:s.id)||"",ie=E||(null==q||null===(c=q.post)||void 0===c||null===(m=c.responseRootPost)||void 0===m?void 0:m.responseDepth)||0,ae=void 0,oe=null==ee||null===(p=ee.pagingInfo)||void 0===p?void 0:p.next;return oe&&!y&&(ae=function(){var e=g()(u().mark((function e(){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Q){e.next=5;break}return oe.__typename,n=k()(oe,["__typename"]),e.next=4,Q({variables:{postId:N.id,postResponsesPaging:n}});case 4:U(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),o.createElement(F.N8,null,o.createElement(w.cW,{source:{name:"responses",postId:N.id},extendSource:!0},o.createElement(b.I,{sidebarRef:W,cleanupSidebar:P,isResponsesSidebarVisible:v,pagingInfoNext:oe,isFetchingNextSetOfResponses:V,setIsFetching:U,fetchMoreWithArguments:ae,initialSidebarRender:O},(function(e){var n=e.responseDistribution,t=e.setResponseDistribution,i=e.closeSidebar;return Z||y?o.createElement(C,{responses:ee,parentPost:N,responsesLocked:X,isLockedResponse:K,isLoadingInitialContent:$,isFetchingNextSetOfResponses:V,isResponsesSidebarVisible:v,closeSidebar:i,showPreviousSidebar:x,inResponseToQuote:S,setInResponseToQuote:h,sidebarRef:W,responseDistribution:n,setResponseDistribution:t,responseSortType:M,setResponseSortType:B,rootPostId:te,postDepth:ie,isContinueThisThread:!!y,showCreateReplyEditor:ne}):null}))))},R=((0,S.Ps)(O(),x),function(e){var n=e.children,t=e.post,i=(0,o.useState)(void 0),s=a()(i,2),c=s[0],m=s[1],u=(0,o.useCallback)((function(e){return function(n){m(n),e()}}),[]);return o.createElement(l.E,null,(function(e){var i=e.showPreviousSidebar,a=e.hasLoaded,l=e.initialSidebarRender,s=e.isVisible,p=e.continueThisThreadPosts,k=e.openSidebar,v=e.cleanupSidebar,g=e.responseSortOption;return o.createElement(r.Q.Provider,{value:{openSidebarToRespondToHighlight:u(k)}},!!t&&a&&o.createElement(T,{isResponsesSidebarVisible:s&&0===p.length,parentPost:t,inResponseToQuote:c,setInResponseToQuote:m,showPreviousSidebar:i,cleanupSidebar:v,initialSidebarRender:!!l.current,responsesSort:g}),!!t&&a&&p.map((function(e,n,a){var r=(0,d.iI)(n);return o.createElement(T,{key:t.id,isResponsesSidebarVisible:s&&n===a.length-1,parentPost:t,inResponseToQuote:c,setInResponseToQuote:m,continueThisThreadPost:e,continueThisThreadPostDepth:r,showPreviousSidebar:i,cleanupSidebar:v,initialSidebarRender:!!l.current,responsesSort:g})})),n)}))})},27448:(e,n,t)=>{"use strict";t.d(n,{y:()=>d});var i=t(319),a=t.n(i),o=t(12182),r={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ThreadedResponsesSidebarContent_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"postResponses"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"count"}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isEditor"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"ThreadedReplies_post"}}]}}].concat(a()(o.e9.definitions))},l={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ThreadedResponsesSidebar_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"ThreadedResponsesSidebarContent_post"}}]}}].concat(a()(r.definitions))},d={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"WithResponsesSidebar_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"ThreadedResponsesSidebar_post"}}]}}].concat(a()(l.definitions))}},43242:(e,n,t)=>{"use strict";t.d(n,{E:()=>k});var i=t(319),a=t.n(i),o=t(63038),r=t.n(o),l=t(38125),d=t.n(l),s=t(67294),c=t(21232),m=t(31889),u=t(34135),p=t(77280),k=function(e){var n=e.children,t=s.useState(!1),i=r()(t,2),o=i[0],l=i[1],k=(0,m.F)(),v=!!(0,p.Wd)("responsesOpen"),g=(0,p.Wd)("sortBy"),f=s.useState(!1),S=r()(f,2),h=S[0],N=S[1],y=s.useRef(!0),E=s.useRef(0),x=s.useState(!1),b=r()(x,2),F=b[0],w=b[1],P=s.useCallback((function(){return N(!0)}),[]),I=s.useState([]),_=r()(I,2),O=_[0],C=_[1],T=s.useCallback((function(e){y.current=!1,C([].concat(a()(O),[e]))}),[O]),R=s.useCallback((function(){C(d()(O))}),[O]),D=s.useCallback((function(){N(!1),C([]),y.current=!0}),[]);s.useEffect((function(){w(!0),N(v)}),[v]);var A=function(){window.innerWidth<k.breakpoints.md&&l(!0)};return s.useEffect((function(){return A(),u.V6.on("resize",A),function(){return u.V6.off("resize",A)}}),[]),s.useEffect((function(){var e,n,t=null===(e=window)||void 0===e||null===(n=e.document)||void 0===n?void 0:n.documentElement;return o&&null!=t&&t.style&&(h?(t.style.top="-".concat(E.current,"px"),E.current=t.scrollTop,t.style.overflow="hidden",t.style.position="fixed"):(t.style.overflow="",t.style.position="",t.style.top="",t.scrollTop=E.current)),function(){o&&null!=t&&t.style&&(t.style.overflow="",t.style.position="",t.style.top="",t.scrollTop=E.current)}}),[h]),s.createElement(c.f.Provider,{value:{addContinueThisThreadSidebar:T,openSidebar:P,closeSidebar:D}},n({showPreviousSidebar:R,hasLoaded:F,initialSidebarRender:y,isVisible:h,continueThisThreadPosts:O,openSidebar:P,cleanupSidebar:D,responseSortOption:g}))}},55193:(e,n,t)=>{"use strict";t.d(n,{v:()=>i,Q:()=>a});var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"SuspendedBannerLoader_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isSuspended"}}]}}]},a={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"SuspendedBannerLoader_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isSuspended"}}]}}]}},66018:(e,n,t)=>{"use strict";t.d(n,{Lv:()=>u});var i=t(28655),a=t.n(i),o=t(92471),r=t(67294),l=t(27517),d=t(25735),s=t(78285);function c(){var e=a()(["\n  fragment SuspendedBannerLoader_post on Post {\n    id\n    isSuspended\n  }\n"]);return c=function(){return e},e}function m(){var e=a()(["\n  fragment SuspendedBannerLoader_user on User {\n    id\n    isSuspended\n  }\n"]);return m=function(){return e},e}var u=function(e){var n=e.user,t=e.post,i=e.forceLoad,a=void 0!==i&&i,o=(0,l.I0)(),c=(0,d.VB)({name:"can_view_suspended_content",placeholder:!1})||a;return r.useEffect((function(){c&&(n&&n.isSuspended?o((0,s.Dx)({duration:"NEXTPAGE",toastStyle:"USER_SUSPENDED"})):t&&t.isSuspended&&o((0,s.Dx)({duration:"NEXTPAGE",toastStyle:"POST_SUSPENDED",extraParams:{postId:(null==t?void 0:t.id)||""}})))}),[c]),null};(0,o.Ps)(m()),(0,o.Ps)(c())}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/PostPage.MainContent.90dffc12.chunk.js.map